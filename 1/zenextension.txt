apiVersion: v1
items:
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-06T23:49:45Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: 0030-gateway
      app.kubernetes.io/component: common-web-ui-zen-extension
      app.kubernetes.io/instance: 0030-gateway
      app.kubernetes.io/managed-by: 0030-gateway
      app.kubernetes.io/name: 0030-gateway
      component: common-web-ui-zen-extension
      release: 0030-gateway
    name: common-web-ui-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: zen.cpd.ibm.com/v1
      kind: ZenService
      name: iaf-zen-cpdservice
      uid: df0bf795-d946-40b2-a9ff-8bbfa75f7b3b
    resourceVersion: "41764889"
    uid: 31be7eec-8128-44db-9249-2028c275dff3
  spec:
    bedrock-idp-locations.conf: |
      location /common-nav {
        set_by_lua $nsdomain 'return os.getenv("NS_DOMAIN")';
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $host;
        proxy_set_header zen-namespace-domain $nsdomain;
        proxy_pass https://common-web-ui.cp4ba.svc:3000;
        proxy_read_timeout 10m;
      }

      location /common-nav/api/ {
        set_by_lua $nsdomain 'return os.getenv("NS_DOMAIN")';
        proxy_set_header Host $host;
        proxy_set_header zen-namespace-domain $nsdomain;
        proxy_pass https://common-web-ui.cp4ba.svc:3000;
        proxy_read_timeout 10m;
      }
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "bedrock-idp-locations",
            "details": {
              "location_conf": "bedrock-idp-locations.conf"
            }
        }
      ]
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:40:39.081146+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-06T23:49:45Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:40:42Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-06T23:52:53Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydiZWRyb2NrLWlkcC1sb2NhdGlvbnMuY29uZic6ICdsb2NhdGlvbiAvY29tbW9uLW5hdiB7XG4gIHNldF9ieV9sdWEgJG5zZG9tYWluIFwncmV0dXJuIG9zLmdldGVudigiTlNfRE9NQUlOIilcJztcbiAgYWNjZXNzX2J5X2x1YV9maWxlIC9uZ2lueF9kYXRhL2NoZWNrand0Lmx1YTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIHplbi1uYW1lc3BhY2UtZG9tYWluICRuc2RvbWFpbjtcbiAgcHJveHlfcGFzcyBodHRwczovL2NvbW1vbi13ZWItdWkuY3A0YmEuc3ZjOjMwMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAxMG07XG59XG5cbmxvY2F0aW9uIC9jb21tb24tbmF2L2FwaS8ge1xuICBzZXRfYnlfbHVhICRuc2RvbWFpbiBcJ3JldHVybiBvcy5nZXRlbnYoIk5TX0RPTUFJTiIpXCc7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciB6ZW4tbmFtZXNwYWNlLWRvbWFpbiAkbnNkb21haW47XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9jb21tb24td2ViLXVpLmNwNGJhLnN2YzozMDAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMTBtO1xufVxuJywgJ2V4dGVuc2lvbnMnOiAnW1xuICB7XG4gICAgICAiZXh0ZW5zaW9uX3BvaW50X2lkIjogInplbl9mcm9udF9kb29yIixcbiAgICAgICJleHRlbnNpb25fbmFtZSI6ICJiZWRyb2NrLWlkcC1sb2NhdGlvbnMiLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJsb2NhdGlvbl9jb25mIjogImJlZHJvY2staWRwLWxvY2F0aW9ucy5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nfQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:45:19Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: bastudio
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      icpdata_addon: "true"
      icpdata_addon_version: 25.0.0-6622e
      release: 25.0.0
    name: cp4ba-bas-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4ACluster
      name: icp4adeploy
      uid: fd59d459-79de-48ea-83b1-ecac90d65c93
    resourceVersion: "41768369"
    uid: d8c10691-03da-49f6-ba4b-fdf915cc20fc
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "cp4ba-bas-extension",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: "location /bas/bpm/notification/cometd\n{\n  set $http_basaffinityvars
      '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block {\n    local jwtcheck
      = require(\"nginx_data.verify-jwt\")\n    local b64 = require(\"ngx.base64\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if ( ngx.var.request_method
      == \"OPTIONS\") then\n      auth_header = \"options_should_be_white_list_without_auth\"\n
      \   elseif (auth_header == nil) then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  proxy_set_header Upgrade $http_upgrade;\n
      \ proxy_set_header Connection $http_connection;\n  add_header Access-Control-Allow-Origin
      $upstream_http_access_control_allow_origin;\n  add_header Access-Control-Allow-Headers
      $upstream_http_access_control_allow_headers;\n  rewrite ^ $request_uri;\n  rewrite
      ^/(.*) $1 break;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_http_version 1.1;\n}\nlocation /bas/\n{\n  set $http_basaffinityvars
      '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block {\n    local jwtcheck
      = require(\"nginx_data.verify-jwt\")\n    local b64 = require(\"ngx.base64\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if ( ngx.var.request_method
      == \"OPTIONS\") then\n      auth_header = \"options_should_be_white_list_without_auth\"\n
      \   elseif (auth_header == nil) then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ add_header Access-Control-Allow-Origin $upstream_http_access_control_allow_origin;\n
      \ add_header Access-Control-Allow-Headers $upstream_http_access_control_allow_headers;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n}\nlocation /bas/automationservices/\n{\n  set $http_basaffinityvars
      '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block {\n    local jwtcheck
      = require(\"nginx_data.verify-jwt\")\n    local b64 = require(\"ngx.base64\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if ( ngx.var.request_method
      == \"OPTIONS\") then\n      auth_header = \"options_should_be_white_list_without_auth\"\n
      \   elseif (auth_header == nil) then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n}\nlocation /bas/teamworks/webservices/\n{\n  set $http_basaffinityvars
      '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block {\n    local jwtcheck
      = require(\"nginx_data.verify-jwt\")\n    local b64 = require(\"ngx.base64\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if ( ngx.var.request_method
      == \"OPTIONS\") then\n      auth_header = \"options_should_be_white_list_without_auth\"\n
      \   elseif (auth_header == nil) then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n}\nlocation /bas/ops/std/bpm/processes/model\n{\n  set
      $http_basaffinityvars '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block
      {\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_http_version
      1.1;\n  proxy_set_header   \"Connection\" \"\";\n}\nlocation /bas/ops/std/bpm/processes/participants\n{\n
      \ set $http_basaffinityvars '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block
      {\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_http_version
      1.1;\n  proxy_set_header   \"Connection\" \"\";\n}\nlocation /bas/automationservices/callback/rest\n{\n
      \ set $http_basaffinityvars '';\n  set $basAffinityCookieValue '';\n  access_by_lua_block
      {\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id = 'bas-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_basaffinityvars
      = ngx.var[cookie_session_id_var] \n    local basNginxCache = ngx.shared.bas_nginx_cache\n
      \   local ips = basNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-bastudio-service-headless-1.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      basNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_basaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_basaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_basaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_basaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['basAffinityCookieValue']
      = 'bas-affinity-cookie=' .. ngx.var.http_basaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/bas'\n  }\n  add_header 'Set-Cookie' $basAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://bastudio-server/$uri;\n  proxy_http_version
      1.1;\n  proxy_set_header   \"Connection\" \"\";\n}"
    upstream.conf: |
      lua_shared_dict bas_nginx_cache 1m;
      upstream bastudio-server {
        server 127.0.0.1:443;
        balancer_by_lua_block {
          local balancer = require "ngx.balancer"
          local b64 = require("ngx.base64")
          local ip = b64.decode_base64url(ngx.var.http_basaffinityvars)
          local ok , err = balancer.set_current_peer(ip,9443)
          if not ok then
            ngx.log(ngx.ERR, "failed to set the current peer: ", err)
            return ngx.exit(500)
          end
        }
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:43:32.87951+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:45:25Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:43:36Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:49:08Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiY3A0YmEtYmFzLWV4dGVuc2lvbiIsXG4gICAgICAiZGV0YWlscyI6IHtcbiAgICAgICAgInVwc3RyZWFtX2NvbmYiOiAidXBzdHJlYW0uY29uZiIsXG4gICAgICAgICJsb2NhdGlvbl9jb25mIjogIm5naW54LmNvbmYiXG4gICAgICB9XG4gIH1cbl1cbicsICduZ2lueC5jb25mJzogJ2xvY2F0aW9uIC9iYXMvYnBtL25vdGlmaWNhdGlvbi9jb21ldGRcbntcbiAgc2V0ICRodHRwX2Jhc2FmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGJhc0FmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoIG5neC52YXIucmVxdWVzdF9tZXRob2QgPT0gIk9QVElPTlMiKSB0aGVuXG4gICAgICBhdXRoX2hlYWRlciA9ICJvcHRpb25zX3Nob3VsZF9iZV93aGl0ZV9saXN0X3dpdGhvdXRfYXV0aCJcbiAgICBlbHNlaWYgKGF1dGhfaGVhZGVyID09IG5pbCkgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVuZFxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdiYXMtYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGJhc05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmJhc19uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhc05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgaXBzID0ge31cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXN0dWRpby1zZXJ2aWNlLWhlYWRsZXNzLTEuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhc3R1ZGlvLXNlcnZpY2UtaGVhZGxlc3MtMS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIHtcbiAgICAgICAgICBxdHlwZSA9IDI4LFxuICAgICAgICAgIGFkZGl0aW9uYWxfc2VjdGlvbiA9IHRydWUsXG4gICAgICAgIH0sIHt9KVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9ICJbIiAuLiBhbnMuYWRkcmVzcyAuLiAiXSJcbiAgICAgICAgZW5kXG4gICAgICBlbHNlXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gYW5zLmFkZHJlc3NcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIGJhc05naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9PSBuaWwgdGhlblxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZWxzZVxuICAgICAgbG9jYWwgaXBWYWx1ZSA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVuZFxuICAgIG5neC52YXJbXCdiYXNBZmZpbml0eUNvb2tpZVZhbHVlXCddID0gXCdiYXMtYWZmaW5pdHktY29va2llPVwnIC4uIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYmFzXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7XG4gIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkaHR0cF9jb25uZWN0aW9uO1xuICBhZGRfaGVhZGVyIEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiAkdXBzdHJlYW1faHR0cF9hY2Nlc3NfY29udHJvbF9hbGxvd19vcmlnaW47XG4gIGFkZF9oZWFkZXIgQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyAkdXBzdHJlYW1faHR0cF9hY2Nlc3NfY29udHJvbF9hbGxvd19oZWFkZXJzO1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcHJveHlfcGFzcyBodHRwczovL2Jhc3R1ZGlvLXNlcnZlci8kdXJpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG59XG5sb2NhdGlvbiAvYmFzL1xue1xuICBzZXQgJGh0dHBfYmFzYWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYmFzQWZmaW5pdHlDb29raWVWYWx1ZSBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICAgIGlmICggbmd4LnZhci5yZXF1ZXN0X21ldGhvZCA9PSAiT1BUSU9OUyIpIHRoZW5cbiAgICAgIGF1dGhfaGVhZGVyID0gIm9wdGlvbnNfc2hvdWxkX2JlX3doaXRlX2xpc3Rfd2l0aG91dF9hdXRoIlxuICAgIGVsc2VpZiAoYXV0aF9oZWFkZXIgPT0gbmlsKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbHNlaWYgKHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw1KX49IkJhc2ljIikgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZW5kXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2Jhcy1hZmZpbml0eS1jb29raWVcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl0gXG4gICAgbG9jYWwgYmFzTmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuYmFzX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYmFzTmdpbnhDYWNoZTpnZXQoImlwcyIpXG4gICAgaWYgaXBzID09IG5pbCB0aGVuXG4gICAgICBsb2NhbCByZXNvbHZlciA9IHJlcXVpcmUgInJlc3R5LmRucy5yZXNvbHZlciJcbiAgICAgIGxvY2FsIHIsIGVyciA9IHJlc29sdmVyOm5ld3tcbiAgICAgICAgICBuYW1lc2VydmVycyA9IHsgIjE3Mi4zMC4wLjEwIiB9LFxuICAgICAgICAgIHJldHJhbnMgPSA1LFxuICAgICAgICAgIHRpbWVvdXQgPSAyMDAwLFxuICAgICAgICAgIG5vX3JhbmRvbSA9IHRydWUsXG4gICAgICB9XG4gICAgICBpcHMgPSB7fVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhc3R1ZGlvLXNlcnZpY2UtaGVhZGxlc3MtMS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIG5pbCwge30pXG4gICAgICBpZiB0YWJsZS5nZXRuKGFuc3dlcnMpID09IDAgdGhlblxuICAgICAgICBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYmFzdHVkaW8tc2VydmljZS1oZWFkbGVzcy0xLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmFzTmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhc0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2Jhcy1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXNcJ1xuICB9XG4gIGFkZF9oZWFkZXIgXCdTZXQtQ29va2llXCcgJGJhc0FmZmluaXR5Q29va2llVmFsdWU7XG4gIGFkZF9oZWFkZXIgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luICR1cHN0cmVhbV9odHRwX2FjY2Vzc19jb250cm9sX2FsbG93X29yaWdpbjtcbiAgYWRkX2hlYWRlciBBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzICR1cHN0cmVhbV9odHRwX2FjY2Vzc19jb250cm9sX2FsbG93X2hlYWRlcnM7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcmV0dXJuIDQwMDtcbiAgcHJveHlfcGFzcyBodHRwczovL2Jhc3R1ZGlvLXNlcnZlci8kdXJpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAgIDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG4gIHByb3h5X3NldF9oZWFkZXIgICAiQ29ubmVjdGlvbiIgIiI7XG59XG5sb2NhdGlvbiAvYmFzL2F1dG9tYXRpb25zZXJ2aWNlcy9cbntcbiAgc2V0ICRodHRwX2Jhc2FmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGJhc0FmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoIG5neC52YXIucmVxdWVzdF9tZXRob2QgPT0gIk9QVElPTlMiKSB0aGVuXG4gICAgICBhdXRoX2hlYWRlciA9ICJvcHRpb25zX3Nob3VsZF9iZV93aGl0ZV9saXN0X3dpdGhvdXRfYXV0aCJcbiAgICBlbHNlaWYgKGF1dGhfaGVhZGVyID09IG5pbCkgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVuZFxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdiYXMtYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGJhc05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmJhc19uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhc05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgaXBzID0ge31cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXN0dWRpby1zZXJ2aWNlLWhlYWRsZXNzLTEuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhc3R1ZGlvLXNlcnZpY2UtaGVhZGxlc3MtMS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIHtcbiAgICAgICAgICBxdHlwZSA9IDI4LFxuICAgICAgICAgIGFkZGl0aW9uYWxfc2VjdGlvbiA9IHRydWUsXG4gICAgICAgIH0sIHt9KVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9ICJbIiAuLiBhbnMuYWRkcmVzcyAuLiAiXSJcbiAgICAgICAgZW5kXG4gICAgICBlbHNlXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gYW5zLmFkZHJlc3NcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIGJhc05naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9PSBuaWwgdGhlblxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZWxzZVxuICAgICAgbG9jYWwgaXBWYWx1ZSA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVuZFxuICAgIG5neC52YXJbXCdiYXNBZmZpbml0eUNvb2tpZVZhbHVlXCddID0gXCdiYXMtYWZmaW5pdHktY29va2llPVwnIC4uIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYmFzXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9iYXN0dWRpby1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9odHRwX3ZlcnNpb24gMS4xO1xuICBwcm94eV9zZXRfaGVhZGVyICAgIkNvbm5lY3Rpb24iICIiO1xufVxubG9jYXRpb24gL2Jhcy90ZWFtd29ya3Mvd2Vic2VydmljZXMvXG57XG4gIHNldCAkaHR0cF9iYXNhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnYmFzLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXSBcbiAgICBsb2NhbCBiYXNOZ2lueENhY2hlID0gbmd4LnNoYXJlZC5iYXNfbmdpbnhfY2FjaGVcbiAgICBsb2NhbCBpcHMgPSBiYXNOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGlwcyA9IHt9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYmFzdHVkaW8tc2VydmljZS1oZWFkbGVzcy0xLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwgbmlsLCB7fSlcbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXN0dWRpby1zZXJ2aWNlLWhlYWRsZXNzLTEuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXNOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmFzQWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnYmFzLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhc1wnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmFzQWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYmFzdHVkaW8tc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXMvb3BzL3N0ZC9icG0vcHJvY2Vzc2VzL21vZGVsXG57XG4gIHNldCAkaHR0cF9iYXNhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdiYXMtYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGJhc05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmJhc19uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhc05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgaXBzID0ge31cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXN0dWRpby1zZXJ2aWNlLWhlYWRsZXNzLTEuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhc3R1ZGlvLXNlcnZpY2UtaGVhZGxlc3MtMS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIHtcbiAgICAgICAgICBxdHlwZSA9IDI4LFxuICAgICAgICAgIGFkZGl0aW9uYWxfc2VjdGlvbiA9IHRydWUsXG4gICAgICAgIH0sIHt9KVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9ICJbIiAuLiBhbnMuYWRkcmVzcyAuLiAiXSJcbiAgICAgICAgZW5kXG4gICAgICBlbHNlXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gYW5zLmFkZHJlc3NcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIGJhc05naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9PSBuaWwgdGhlblxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZWxzZVxuICAgICAgbG9jYWwgaXBWYWx1ZSA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVuZFxuICAgIG5neC52YXJbXCdiYXNBZmZpbml0eUNvb2tpZVZhbHVlXCddID0gXCdiYXMtYWZmaW5pdHktY29va2llPVwnIC4uIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYmFzXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9iYXN0dWRpby1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXMvb3BzL3N0ZC9icG0vcHJvY2Vzc2VzL3BhcnRpY2lwYW50c1xue1xuICBzZXQgJGh0dHBfYmFzYWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYmFzQWZmaW5pdHlDb29raWVWYWx1ZSBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnYmFzLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXSBcbiAgICBsb2NhbCBiYXNOZ2lueENhY2hlID0gbmd4LnNoYXJlZC5iYXNfbmdpbnhfY2FjaGVcbiAgICBsb2NhbCBpcHMgPSBiYXNOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGlwcyA9IHt9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYmFzdHVkaW8tc2VydmljZS1oZWFkbGVzcy0xLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwgbmlsLCB7fSlcbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXN0dWRpby1zZXJ2aWNlLWhlYWRsZXNzLTEuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXNOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmFzQWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnYmFzLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhc1wnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmFzQWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYmFzdHVkaW8tc2VydmVyLyR1cmk7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG4gIHByb3h5X3NldF9oZWFkZXIgICAiQ29ubmVjdGlvbiIgIiI7XG59XG5sb2NhdGlvbiAvYmFzL2F1dG9tYXRpb25zZXJ2aWNlcy9jYWxsYmFjay9yZXN0XG57XG4gIHNldCAkaHR0cF9iYXNhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdiYXMtYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGJhc05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmJhc19uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhc05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgaXBzID0ge31cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXN0dWRpby1zZXJ2aWNlLWhlYWRsZXNzLTEuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhc3R1ZGlvLXNlcnZpY2UtaGVhZGxlc3MtMS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIHtcbiAgICAgICAgICBxdHlwZSA9IDI4LFxuICAgICAgICAgIGFkZGl0aW9uYWxfc2VjdGlvbiA9IHRydWUsXG4gICAgICAgIH0sIHt9KVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9ICJbIiAuLiBhbnMuYWRkcmVzcyAuLiAiXSJcbiAgICAgICAgZW5kXG4gICAgICBlbHNlXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gYW5zLmFkZHJlc3NcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIGJhc05naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2Jhc2FmZmluaXR5dmFycyA9PSBuaWwgdGhlblxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZWxzZVxuICAgICAgbG9jYWwgaXBWYWx1ZSA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVuZFxuICAgIG5neC52YXJbXCdiYXNBZmZpbml0eUNvb2tpZVZhbHVlXCddID0gXCdiYXMtYWZmaW5pdHktY29va2llPVwnIC4uIG5neC52YXIuaHR0cF9iYXNhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYmFzXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXNBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9iYXN0dWRpby1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn0nLCAndXBzdHJlYW0uY29uZic6ICdsdWFfc2hhcmVkX2RpY3QgYmFzX25naW54X2NhY2hlIDFtO1xudXBzdHJlYW0gYmFzdHVkaW8tc2VydmVyIHtcbiAgc2VydmVyIDEyNy4wLjAuMTo0NDM7XG4gIGJhbGFuY2VyX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgYmFsYW5jZXIgPSByZXF1aXJlICJuZ3guYmFsYW5jZXIiXG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgaXAgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmFzYWZmaW5pdHl2YXJzKVxuICAgIGxvY2FsIG9rICwgZXJyID0gYmFsYW5jZXIuc2V0X2N1cnJlbnRfcGVlcihpcCw5NDQzKVxuICAgIGlmIG5vdCBvayB0aGVuXG4gICAgICBuZ3gubG9nKG5neC5FUlIsICJmYWlsZWQgdG8gc2V0IHRoZSBjdXJyZW50IHBlZXI6ICIsIGVycilcbiAgICAgIHJldHVybiBuZ3guZXhpdCg1MDApXG4gICAgZW5kXG4gIH1cbiAga2VlcGFsaXZlIDUxMjtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xufVxuJ30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:08:11Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy-awsins1
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: workflow
      app.kubernetes.io/part-of: icp4adeploy-awsins1
    name: cp4ba-icp4adeploy-awsins1-baw-server-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      controller: true
      kind: WorkflowRuntime
      name: icp4adeploy-awsins1
      uid: 00be707f-4bd8-4127-a060-0aca5b0fba70
    resourceVersion: "41759413"
    uid: d3d7275e-9193-4c9f-95c0-85045453ab0e
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "cp4ba-icp4adeploy-awsins1-baw-server-zen-extension",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |
      location /baw-awsins1/bpm/notification/cometd
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $http_connection;
        add_header Access-Control-Allow-Origin $upstream_http_access_control_allow_origin;
        add_header Access-Control-Allow-Headers $upstream_http_access_control_allow_headers;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_buffer_size         256k;
        proxy_buffers             8 512k;
        proxy_busy_buffers_size   512k;
        proxy_http_version 1.1;
      }
      location /baw-awsins1/
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        add_header Access-Control-Allow-Origin $upstream_http_access_control_allow_origin;
        add_header Access-Control-Allow-Headers $upstream_http_access_control_allow_headers;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-awsins1/automationservices/
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-awsins1/teamworks/webservices/
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-awsins1/ops/std/bpm/processes/model
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local b64 = require("ngx.base64")
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-server.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-server.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-awsins1/ops/std/bpm/processes/participants
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local b64 = require("ngx.base64")
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-awsins1/automationservices/callback/rest
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local b64 = require("ngx.base64")
          local cookie_session_id = 'icp4adeploy-awsins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_awsins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-awsins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-awsins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-awsins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-awsins1-baw-server/$uri;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
    upstream.conf: |
      lua_shared_dict icp4adeploy_awsins1_baw_server_nginx_cache 1m;
      upstream icp4adeploy-awsins1-baw-server {
        server 127.0.0.1:443;
        balancer_by_lua_block {
          local balancer = require "ngx.balancer"
          local b64 = require("ngx.base64")
          local ip = b64.decode_base64url(ngx.var.http_bawaffinityvars)
          local ok , err = balancer.set_current_peer(ip,9443)
          if not ok then
            ngx.log(ngx.ERR, "failed to set the current peer: ", err)
            return ngx.exit(500)
          end
        }
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:36:00.497071+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:08:11Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:36:04Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:11:38Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiY3A0YmEtaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLXplbi1leHRlbnNpb24iLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJ1cHN0cmVhbV9jb25mIjogInVwc3RyZWFtLmNvbmYiLFxuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvYmF3LWF3c2luczEvYnBtL25vdGlmaWNhdGlvbi9jb21ldGRcbntcbiAgc2V0ICRodHRwX2Jhd2FmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGJhd0FmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoIG5neC52YXIucmVxdWVzdF9tZXRob2QgPT0gIk9QVElPTlMiKSB0aGVuXG4gICAgICBhdXRoX2hlYWRlciA9ICJvcHRpb25zX3Nob3VsZF9iZV93aGl0ZV9saXN0X3dpdGhvdXRfYXV0aCJcbiAgICBlbHNlaWYgKGF1dGhfaGVhZGVyID09IG5pbCkgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVuZFxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2ZXItYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbG9jYWwgYmF3TmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuaWNwNGFkZXBsb3lfYXdzaW5zMV9iYXdfc2VydmVyX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYmF3TmdpbnhDYWNoZTpnZXQoImlwcyIpXG4gICAgaWYgaXBzID09IG5pbCB0aGVuXG4gICAgICBsb2NhbCByZXNvbHZlciA9IHJlcXVpcmUgInJlc3R5LmRucy5yZXNvbHZlciJcbiAgICAgIGxvY2FsIHIsIGVyciA9IHJlc29sdmVyOm5ld3tcbiAgICAgICAgICBuYW1lc2VydmVycyA9IHsgIjE3Mi4zMC4wLjEwIiB9LFxuICAgICAgICAgIHJldHJhbnMgPSA1LFxuICAgICAgICAgIHRpbWVvdXQgPSAyMDAwLFxuICAgICAgICAgIG5vX3JhbmRvbSA9IHRydWUsXG4gICAgICB9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmljZS1oZWFkbGVzcy5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIG5pbCwge30pXG4gICAgICBpcHMgPSB7fVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXdOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmF3QWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhdy1hd3NpbnMxXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7XG4gIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkaHR0cF9jb25uZWN0aW9uO1xuICBhZGRfaGVhZGVyIEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiAkdXBzdHJlYW1faHR0cF9hY2Nlc3NfY29udHJvbF9hbGxvd19vcmlnaW47XG4gIGFkZF9oZWFkZXIgQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyAkdXBzdHJlYW1faHR0cF9hY2Nlc3NfY29udHJvbF9hbGxvd19oZWFkZXJzO1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZlci8kdXJpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgIDUxMms7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG59XG5sb2NhdGlvbiAvYmF3LWF3c2luczEvXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2F3c2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYXdzaW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgYWRkX2hlYWRlciBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4gJHVwc3RyZWFtX2h0dHBfYWNjZXNzX2NvbnRyb2xfYWxsb3dfb3JpZ2luO1xuICBhZGRfaGVhZGVyIEFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMgJHVwc3RyZWFtX2h0dHBfYWNjZXNzX2NvbnRyb2xfYWxsb3dfaGVhZGVycztcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYXdzaW5zMS9hdXRvbWF0aW9uc2VydmljZXMvXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2F3c2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYXdzaW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYXdzaW5zMS90ZWFtd29ya3Mvd2Vic2VydmljZXMvXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2F3c2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYXdzaW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYXdzaW5zMS9vcHMvc3RkL2JwbS9wcm9jZXNzZXMvbW9kZWxcbntcbiAgc2V0ICRodHRwX2Jhd2FmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGJhd0FmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2ljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWVcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICBsb2NhbCBiYXdOZ2lueENhY2hlID0gbmd4LnNoYXJlZC5pY3A0YWRlcGxveV9hd3NpbnMxX2Jhd19zZXJ2ZXJfbmdpbnhfY2FjaGVcbiAgICBsb2NhbCBpcHMgPSBiYXdOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2ZXIuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2ZXIuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXdOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmF3QWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhdy1hd3NpbnMxXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYXdzaW5zMS9vcHMvc3RkL2JwbS9wcm9jZXNzZXMvcGFydGljaXBhbnRzXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2ZXItYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbG9jYWwgYmF3TmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuaWNwNGFkZXBsb3lfYXdzaW5zMV9iYXdfc2VydmVyX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYmF3TmdpbnhDYWNoZTpnZXQoImlwcyIpXG4gICAgaWYgaXBzID09IG5pbCB0aGVuXG4gICAgICBsb2NhbCByZXNvbHZlciA9IHJlcXVpcmUgInJlc3R5LmRucy5yZXNvbHZlciJcbiAgICAgIGxvY2FsIHIsIGVyciA9IHJlc29sdmVyOm5ld3tcbiAgICAgICAgICBuYW1lc2VydmVycyA9IHsgIjE3Mi4zMC4wLjEwIiB9LFxuICAgICAgICAgIHJldHJhbnMgPSA1LFxuICAgICAgICAgIHRpbWVvdXQgPSAyMDAwLFxuICAgICAgICAgIG5vX3JhbmRvbSA9IHRydWUsXG4gICAgICB9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmljZS1oZWFkbGVzcy5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIG5pbCwge30pXG4gICAgICBpcHMgPSB7fVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXdOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmF3QWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhdy1hd3NpbnMxXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYXdzaW5zMS9hdXRvbWF0aW9uc2VydmljZXMvY2FsbGJhY2svcmVzdFxue1xuICBzZXQgJGh0dHBfYmF3YWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZSBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2F3c2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1hd3NpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWF3c2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYXdzaW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG4gIHByb3h5X3NldF9oZWFkZXIgICAiQ29ubmVjdGlvbiIgIiI7XG59XG4nLCAndXBzdHJlYW0uY29uZic6ICdsdWFfc2hhcmVkX2RpY3QgaWNwNGFkZXBsb3lfYXdzaW5zMV9iYXdfc2VydmVyX25naW54X2NhY2hlIDFtO1xudXBzdHJlYW0gaWNwNGFkZXBsb3ktYXdzaW5zMS1iYXctc2VydmVyIHtcbiAgc2VydmVyIDEyNy4wLjAuMTo0NDM7XG4gIGJhbGFuY2VyX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgYmFsYW5jZXIgPSByZXF1aXJlICJuZ3guYmFsYW5jZXIiXG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgaXAgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgIGxvY2FsIG9rICwgZXJyID0gYmFsYW5jZXIuc2V0X2N1cnJlbnRfcGVlcihpcCw5NDQzKVxuICAgIGlmIG5vdCBvayB0aGVuXG4gICAgICBuZ3gubG9nKG5neC5FUlIsICJmYWlsZWQgdG8gc2V0IHRoZSBjdXJyZW50IHBlZXI6ICIsIGVycilcbiAgICAgIHJldHVybiBuZ3guZXhpdCg1MDApXG4gICAgZW5kXG4gIH1cbiAga2VlcGFsaXZlIDUxMjtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xufVxuJ30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:13:56Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy-bawins1
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: workflow
      app.kubernetes.io/part-of: icp4adeploy-bawins1
    name: cp4ba-icp4adeploy-bawins1-baw-server-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      controller: true
      kind: WorkflowRuntime
      name: icp4adeploy-bawins1
      uid: cd6065d2-ffa2-4450-a9e9-77986dc5d674
    resourceVersion: "41764958"
    uid: ae739022-351c-4218-a6a7-8f63675befd3
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "cp4ba-icp4adeploy-bawins1-baw-server-zen-extension",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |
      location /baw-bawins1/bpm/notification/cometd
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $http_connection;
        add_header Access-Control-Allow-Origin $upstream_http_access_control_allow_origin;
        add_header Access-Control-Allow-Headers $upstream_http_access_control_allow_headers;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_buffer_size         256k;
        proxy_buffers             8 512k;
        proxy_busy_buffers_size   512k;
        proxy_http_version 1.1;
      }
      location /baw-bawins1/
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        add_header Access-Control-Allow-Origin $upstream_http_access_control_allow_origin;
        add_header Access-Control-Allow-Headers $upstream_http_access_control_allow_headers;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-bawins1/automationservices/
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-bawins1/teamworks/webservices/
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local b64 = require("ngx.base64")
          local auth_header = ngx.var.http_Authorization
          if ( ngx.var.request_method == "OPTIONS") then
            auth_header = "options_should_be_white_list_without_auth"
          elseif (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-bawins1/ops/std/bpm/processes/model
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local b64 = require("ngx.base64")
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-server.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-server.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-bawins1/ops/std/bpm/processes/participants
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local b64 = require("ngx.base64")
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
      location /baw-bawins1/automationservices/callback/rest
      {
        set $http_bawaffinityvars '';
        set $bawAffinityCookieValue '';
        access_by_lua_block {
          local b64 = require("ngx.base64")
          local cookie_session_id = 'icp4adeploy-bawins1-baw-server-affinity-cookie'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          ngx.var.http_bawaffinityvars = ngx.var[cookie_session_id_var]
          local bawNginxCache = ngx.shared.icp4adeploy_bawins1_baw_server_nginx_cache
          local ips = bawNginxCache:get("ips")
          if ips == nil then
            local resolver = require "resty.dns.resolver"
            local r, err = resolver:new{
                nameservers = { "172.30.0.10" },
                retrans = 5,
                timeout = 2000,
                no_random = true,
            }
            local answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", nil, {})
            ips = {}
            if table.getn(answers) == 0 then
              answers, err, tries = r:query("icp4adeploy-bawins1-baw-service-headless.cp4ba.svc.cluster.local", {
                qtype = 28,
                additional_section = true,
              }, {})
              for i, ans in ipairs(answers) do
                ips[i] = "[" .. ans.address .. "]"
              end
            else
              for i, ans in ipairs(answers) do
                ips[i] = ans.address
              end
            end
            bawNginxCache:set("ips", ips, 2000)
          end
          local checked = false
          if ngx.var.http_bawaffinityvars == nil then
            checked = true
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          else
            local ipValue = b64.decode_base64url(ngx.var.http_bawaffinityvars)
            for i =1, table.getn(ips) do
              if ips[i] == ipValue then
                checked = true
              end
            end
          end
          if ( not checked ) then
            ngx.var.http_bawaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])
          end
          ngx.var['bawAffinityCookieValue'] = 'icp4adeploy-bawins1-baw-server-affinity-cookie=' .. ngx.var.http_bawaffinityvars .. '; Secure; HttpOnly; SameSite=Strict; Path=/baw-bawins1'
        }
        add_header 'Set-Cookie' $bawAffinityCookieValue;
        proxy_set_header Host $http_host;
        rewrite ^ $request_uri;
        rewrite ^/(.*) $1 break;
        return 400;
        proxy_pass https://icp4adeploy-bawins1-baw-server/$uri;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
      }
    upstream.conf: |
      lua_shared_dict icp4adeploy_bawins1_baw_server_nginx_cache 1m;
      upstream icp4adeploy-bawins1-baw-server {
        server 127.0.0.1:443;
        balancer_by_lua_block {
          local balancer = require "ngx.balancer"
          local b64 = require("ngx.base64")
          local ip = b64.decode_base64url(ngx.var.http_bawaffinityvars)
          local ok , err = balancer.set_current_peer(ip,9443)
          if not ok then
            ngx.log(ngx.ERR, "failed to set the current peer: ", err)
            return ngx.exit(500)
          end
        }
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:40:42.786322+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:13:56Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:40:46Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:17:22Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiY3A0YmEtaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLXplbi1leHRlbnNpb24iLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJ1cHN0cmVhbV9jb25mIjogInVwc3RyZWFtLmNvbmYiLFxuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvYmF3LWJhd2luczEvYnBtL25vdGlmaWNhdGlvbi9jb21ldGRcbntcbiAgc2V0ICRodHRwX2Jhd2FmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGJhd0FmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoIG5neC52YXIucmVxdWVzdF9tZXRob2QgPT0gIk9QVElPTlMiKSB0aGVuXG4gICAgICBhdXRoX2hlYWRlciA9ICJvcHRpb25zX3Nob3VsZF9iZV93aGl0ZV9saXN0X3dpdGhvdXRfYXV0aCJcbiAgICBlbHNlaWYgKGF1dGhfaGVhZGVyID09IG5pbCkgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVuZFxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2ZXItYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbG9jYWwgYmF3TmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuaWNwNGFkZXBsb3lfYmF3aW5zMV9iYXdfc2VydmVyX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYmF3TmdpbnhDYWNoZTpnZXQoImlwcyIpXG4gICAgaWYgaXBzID09IG5pbCB0aGVuXG4gICAgICBsb2NhbCByZXNvbHZlciA9IHJlcXVpcmUgInJlc3R5LmRucy5yZXNvbHZlciJcbiAgICAgIGxvY2FsIHIsIGVyciA9IHJlc29sdmVyOm5ld3tcbiAgICAgICAgICBuYW1lc2VydmVycyA9IHsgIjE3Mi4zMC4wLjEwIiB9LFxuICAgICAgICAgIHJldHJhbnMgPSA1LFxuICAgICAgICAgIHRpbWVvdXQgPSAyMDAwLFxuICAgICAgICAgIG5vX3JhbmRvbSA9IHRydWUsXG4gICAgICB9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmljZS1oZWFkbGVzcy5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIG5pbCwge30pXG4gICAgICBpcHMgPSB7fVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXdOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmF3QWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhdy1iYXdpbnMxXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7XG4gIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkaHR0cF9jb25uZWN0aW9uO1xuICBhZGRfaGVhZGVyIEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiAkdXBzdHJlYW1faHR0cF9hY2Nlc3NfY29udHJvbF9hbGxvd19vcmlnaW47XG4gIGFkZF9oZWFkZXIgQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyAkdXBzdHJlYW1faHR0cF9hY2Nlc3NfY29udHJvbF9hbGxvd19oZWFkZXJzO1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZlci8kdXJpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgIDUxMms7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG59XG5sb2NhdGlvbiAvYmF3LWJhd2luczEvXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2Jhd2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYmF3aW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgYWRkX2hlYWRlciBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4gJHVwc3RyZWFtX2h0dHBfYWNjZXNzX2NvbnRyb2xfYWxsb3dfb3JpZ2luO1xuICBhZGRfaGVhZGVyIEFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMgJHVwc3RyZWFtX2h0dHBfYWNjZXNzX2NvbnRyb2xfYWxsb3dfaGVhZGVycztcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYmF3aW5zMS9hdXRvbWF0aW9uc2VydmljZXMvXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2Jhd2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYmF3aW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYmF3aW5zMS90ZWFtd29ya3Mvd2Vic2VydmljZXMvXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2Jhd2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYmF3aW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0ICAgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYmF3aW5zMS9vcHMvc3RkL2JwbS9wcm9jZXNzZXMvbW9kZWxcbntcbiAgc2V0ICRodHRwX2Jhd2FmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGJhd0FmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2ljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWVcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICBsb2NhbCBiYXdOZ2lueENhY2hlID0gbmd4LnNoYXJlZC5pY3A0YWRlcGxveV9iYXdpbnMxX2Jhd19zZXJ2ZXJfbmdpbnhfY2FjaGVcbiAgICBsb2NhbCBpcHMgPSBiYXdOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2ZXIuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2ZXIuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXdOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmF3QWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhdy1iYXdpbnMxXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYmF3aW5zMS9vcHMvc3RkL2JwbS9wcm9jZXNzZXMvcGFydGljaXBhbnRzXG57XG4gIHNldCAkaHR0cF9iYXdhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2ZXItYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbG9jYWwgYmF3TmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuaWNwNGFkZXBsb3lfYmF3aW5zMV9iYXdfc2VydmVyX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYmF3TmdpbnhDYWNoZTpnZXQoImlwcyIpXG4gICAgaWYgaXBzID09IG5pbCB0aGVuXG4gICAgICBsb2NhbCByZXNvbHZlciA9IHJlcXVpcmUgInJlc3R5LmRucy5yZXNvbHZlciJcbiAgICAgIGxvY2FsIHIsIGVyciA9IHJlc29sdmVyOm5ld3tcbiAgICAgICAgICBuYW1lc2VydmVycyA9IHsgIjE3Mi4zMC4wLjEwIiB9LFxuICAgICAgICAgIHJldHJhbnMgPSA1LFxuICAgICAgICAgIHRpbWVvdXQgPSAyMDAwLFxuICAgICAgICAgIG5vX3JhbmRvbSA9IHRydWUsXG4gICAgICB9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmljZS1oZWFkbGVzcy5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIG5pbCwge30pXG4gICAgICBpcHMgPSB7fVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBiYXdOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYmF3QWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2Jhdy1iYXdpbnMxXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRiYXdBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeLyguKikgJDEgYnJlYWs7XG4gIHJldHVybiA0MDA7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTtcbiAgcHJveHlfc2V0X2hlYWRlciAgICJDb25uZWN0aW9uIiAiIjtcbn1cbmxvY2F0aW9uIC9iYXctYmF3aW5zMS9hdXRvbWF0aW9uc2VydmljZXMvY2FsbGJhY2svcmVzdFxue1xuICBzZXQgJGh0dHBfYmF3YWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZSBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIGxvY2FsIGJhd05naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmljcDRhZGVwbG95X2Jhd2luczFfYmF3X3NlcnZlcl9uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGJhd05naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaXBzID0ge31cbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1iYXdpbnMxLWJhdy1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYmF3TmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9iYXdhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2Jhd0FmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2ljcDRhZGVwbG95LWJhd2luczEtYmF3LXNlcnZlci1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2Jhd2FmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9iYXctYmF3aW5zMVwnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYmF3QWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyLyR1cmk7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG4gIHByb3h5X3NldF9oZWFkZXIgICAiQ29ubmVjdGlvbiIgIiI7XG59XG4nLCAndXBzdHJlYW0uY29uZic6ICdsdWFfc2hhcmVkX2RpY3QgaWNwNGFkZXBsb3lfYmF3aW5zMV9iYXdfc2VydmVyX25naW54X2NhY2hlIDFtO1xudXBzdHJlYW0gaWNwNGFkZXBsb3ktYmF3aW5zMS1iYXctc2VydmVyIHtcbiAgc2VydmVyIDEyNy4wLjAuMTo0NDM7XG4gIGJhbGFuY2VyX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgYmFsYW5jZXIgPSByZXF1aXJlICJuZ3guYmFsYW5jZXIiXG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgaXAgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYmF3YWZmaW5pdHl2YXJzKVxuICAgIGxvY2FsIG9rICwgZXJyID0gYmFsYW5jZXIuc2V0X2N1cnJlbnRfcGVlcihpcCw5NDQzKVxuICAgIGlmIG5vdCBvayB0aGVuXG4gICAgICBuZ3gubG9nKG5neC5FUlIsICJmYWlsZWQgdG8gc2V0IHRoZSBjdXJyZW50IHBlZXI6ICIsIGVycilcbiAgICAgIHJldHVybiBuZ3guZXhpdCg1MDApXG4gICAgZW5kXG4gIH1cbiAga2VlcGFsaXZlIDUxMjtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xufVxuJ30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    annotations:
      version: 3.16.2
    creationTimestamp: "2025-12-07T00:26:53Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: cp4ba-bts
      app.kubernetes.io/managed-by: operator
      app.kubernetes.io/name: ibm-bts-cp4ba-bts
      app.kubernetes.io/version: 3.35.4
    name: ibm-bts-zen-frontdoor
    namespace: cp4ba
    ownerReferences:
    - apiVersion: operator.ibm.com/v1alpha1
      blockOwnerDeletion: true
      controller: true
      kind: BusinessTeamsService
      name: cp4ba-bts
      uid: 2161597e-063b-4d5a-9d40-c798a726599c
    resourceVersion: "41761502"
    uid: 3115cba7-2997-434c-aedb-58921e0d6e45
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "ibm-bts-zen-frontdoor",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /teamserver
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_pass https://ibm-bts-cp4ba-bts-service.cp4ba.svc;
      }

      location /teamserver/api
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_pass https://ibm-bts-cp4ba-bts-service.cp4ba.svc/api;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:37:45.385964+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:26:53Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:37:49Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:29:05Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWJtLWJ0cy16ZW4tZnJvbnRkb29yIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvdGVhbXNlcnZlclxue1xuICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWJtLWJ0cy1jcDRiYS1idHMtc2VydmljZS5jcDRiYS5zdmM7XG59XG5cbmxvY2F0aW9uIC90ZWFtc2VydmVyL2FwaVxue1xuICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWJtLWJ0cy1jcDRiYS1idHMtc2VydmljZS5jcDRiYS5zdmMvYXBpO1xufSd9
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:51:45Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy-dpe
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: document_processing
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      release: 25.0.0
    name: icp4adeploy-aca-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4ADocumentProcessingEngine
      name: dpedeploy
      uid: c23cae5c-10b8-4423-b115-dde0df54856e
    resourceVersion: "41768390"
    uid: b58e6ffd-ebdd-498f-a7ab-805c42aed929
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-aca-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: "location /adp/aca/\n{\n  proxy_set_header Host $host;\n  proxy_set_header
      X-ZEN-ROUTING '$host';\n  access_by_lua_file /nginx_data/checkjwt.lua;\n  proxy_pass_request_headers
      on;\n  rewrite ^ $request_uri;\n  rewrite ^/adp/aca/(.*) $1 break;\n  proxy_pass
      https://icp4adeploy-spbackend.cp4ba.svc.cluster.local:5001/$uri;\n  proxy_cookie_flags
      off;\n  proxy_buffer_size 256k;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n  proxy_connect_timeout 120s;\n  proxy_send_timeout 120s;\n  proxy_read_timeout
      120s;\n  client_max_body_size 250m;\n}\nlocation /adp/aca/ping\n{\n  proxy_set_header
      Host $host;\n  proxy_set_header X-ZEN-ROUTING '$host';\n  rewrite ^ $request_uri;\n
      \ rewrite ^/adp/aca/ping?$ /ping break;\n  proxy_pass https://icp4adeploy-spbackend.cp4ba.svc.cluster.local:5001$uri;\n
      \ proxy_cookie_flags off;\n  proxy_connect_timeout 120s;\n  proxy_send_timeout
      120s;\n  proxy_read_timeout 120s;\n}\t"
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:43:34.181561+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:55:46Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:43:37Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:00:17Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktYWNhLXplbi1leHRlbnNpb24iLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJsb2NhdGlvbl9jb25mIjogIm5naW54LmNvbmYiXG4gICAgICB9XG4gIH1cbl1cbicsICduZ2lueC5jb25mJzogImxvY2F0aW9uIC9hZHAvYWNhL1xue1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyAnJGhvc3QnO1xuICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICBwcm94eV9wYXNzX3JlcXVlc3RfaGVhZGVycyBvbjtcbiAgcmV3cml0ZSBeICRyZXF1ZXN0X3VyaTtcbiAgcmV3cml0ZSBeL2FkcC9hY2EvKC4qKSAkMSBicmVhaztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LXNwYmFja2VuZC5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbDo1MDAxLyR1cmk7XG4gIHByb3h5X2Nvb2tpZV9mbGFncyBvZmY7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgMTIwcztcbiAgcHJveHlfc2VuZF90aW1lb3V0IDEyMHM7XG4gIHByb3h5X3JlYWRfdGltZW91dCAxMjBzO1xuICBjbGllbnRfbWF4X2JvZHlfc2l6ZSAyNTBtO1xufVxubG9jYXRpb24gL2FkcC9hY2EvcGluZ1xue1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyAnJGhvc3QnO1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vYWRwL2FjYS9waW5nPyQgL3BpbmcgYnJlYWs7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1zcGJhY2tlbmQuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWw6NTAwMSR1cmk7XG4gIHByb3h5X2Nvb2tpZV9mbGFncyBvZmY7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAxMjBzO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgMTIwcztcbiAgcHJveHlfcmVhZF90aW1lb3V0IDEyMHM7XG59XHQifQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:59:44Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      ads.icp4a.ibm.com.module: designer
      app.kubernetes.io/component: ads
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: ads-zen-extensions
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      patch: GA
      release: 25.0.0
    name: icp4adeploy-ads-designer-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      blockOwnerDeletion: true
      controller: true
      kind: ICP4AAutomationDecisionService
      name: icp4adeploy
      uid: 56cbbb22-a511-4834-b097-af38c2c69a38
    resourceVersion: "41761512"
    uid: 433d4a0a-2540-4776-a52b-ee5ad9060761
  spec:
    extensions: |-
      [{
          "extension_point_id": "zen_front_door",
          "extension_name": "ads-designer-front-door",
          "details": {
              "location_conf": "nginx.conf"
          }
      }]
    nginx.conf: "location /ads/rest-api\n{\n    proxy_set_header Host $host;\n    proxy_set_header
      X-Forwarded-Host $host;\n    proxy_set_header X-Forwarded-Protocol https;\n
      \   proxy_set_header X-ADS-Correlation-Id $request_id;\n    access_by_lua_file
      /nginx_data/checkjwt.lua;\n    proxy_pass https://icp4adeploy-ads-rest-api.cp4ba.svc.cluster.local:9443;
      \  # avoid rewriting on rest-api that cause premature decoding of escaped sequences
      in query parts\n    \n}\n\nlocation /ads/static-front\n{\n    proxy_set_header
      Host $host;\n    proxy_set_header X-Forwarded-Host $host;\n    proxy_set_header
      X-Forwarded-Protocol https;\n    proxy_set_header X-ADS-Correlation-Id $request_id;\n
      \   access_by_lua_file /nginx_data/checkjwt.lua;\n    proxy_pass https://icp4adeploy-ads-rest-api.cp4ba.svc.cluster.local:9443/ads/static-front;\n}\n\nlocation
      /ads/static/maven-releases\n{\n    proxy_set_header Host $host;\n    proxy_set_header
      X-Forwarded-Host $host;\n    proxy_set_header X-Forwarded-Protocol https;\n
      \   proxy_set_header X-ADS-Correlation-Id $request_id;\n    access_by_lua_file
      /nginx_data/checkjwt.lua;\n    proxy_pass https://icp4adeploy-ads-rest-api.cp4ba.svc.cluster.local:9443/ads/static/maven-releases;\n}\n\nlocation
      /ads\n{\n    proxy_set_header Host $host;\n    proxy_set_header X-Forwarded-Host
      $host;\n    proxy_set_header X-Forwarded-Protocol https;\n    access_by_lua_file
      /nginx_data/checkjwt.lua;\n    proxy_pass https://icp4adeploy-ads-rest-api.cp4ba.svc.cluster.local:9443/ads/front;\n}\n"
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:37:45.998678+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:59:44Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:37:49Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:04:23Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1t7XG4gICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgImV4dGVuc2lvbl9uYW1lIjogImFkcy1kZXNpZ25lci1mcm9udC1kb29yIixcbiAgICAiZGV0YWlscyI6IHtcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICB9XG59XScsICduZ2lueC5jb25mJzogJ2xvY2F0aW9uIC9hZHMvcmVzdC1hcGlcbntcbiAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Ib3N0ICRob3N0O1xuICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG9jb2wgaHR0cHM7XG4gICAgcHJveHlfc2V0X2hlYWRlciBYLUFEUy1Db3JyZWxhdGlvbi1JZCAkcmVxdWVzdF9pZDtcbiAgICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICAgIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1hZHMtcmVzdC1hcGkuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWw6OTQ0MzsgICAjIGF2b2lkIHJld3JpdGluZyBvbiByZXN0LWFwaSB0aGF0IGNhdXNlIHByZW1hdHVyZSBkZWNvZGluZyBvZiBlc2NhcGVkIHNlcXVlbmNlcyBpbiBxdWVyeSBwYXJ0c1xuICAgIFxufVxuXG5sb2NhdGlvbiAvYWRzL3N0YXRpYy1mcm9udFxue1xuICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUhvc3QgJGhvc3Q7XG4gICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90b2NvbCBodHRwcztcbiAgICBwcm94eV9zZXRfaGVhZGVyIFgtQURTLUNvcnJlbGF0aW9uLUlkICRyZXF1ZXN0X2lkO1xuICAgIGFjY2Vzc19ieV9sdWFfZmlsZSAvbmdpbnhfZGF0YS9jaGVja2p3dC5sdWE7XG4gICAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWFkcy1yZXN0LWFwaS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbDo5NDQzL2Fkcy9zdGF0aWMtZnJvbnQ7XG59XG5cbmxvY2F0aW9uIC9hZHMvc3RhdGljL21hdmVuLXJlbGVhc2VzXG57XG4gICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtSG9zdCAkaG9zdDtcbiAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvY29sIGh0dHBzO1xuICAgIHByb3h5X3NldF9oZWFkZXIgWC1BRFMtQ29ycmVsYXRpb24tSWQgJHJlcXVlc3RfaWQ7XG4gICAgYWNjZXNzX2J5X2x1YV9maWxlIC9uZ2lueF9kYXRhL2NoZWNrand0Lmx1YTtcbiAgICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYWRzLXJlc3QtYXBpLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsOjk0NDMvYWRzL3N0YXRpYy9tYXZlbi1yZWxlYXNlcztcbn1cblxubG9jYXRpb24gL2Fkc1xue1xuICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUhvc3QgJGhvc3Q7XG4gICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90b2NvbCBodHRwcztcbiAgICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICAgIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1hZHMtcmVzdC1hcGkuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWw6OTQ0My9hZHMvZnJvbnQ7XG59XG4nfQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:00:01Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      ads.icp4a.ibm.com.module: runtime
      app.kubernetes.io/component: ads
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: ads-zen-extensions
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      patch: GA
      release: 25.0.0
    name: icp4adeploy-ads-runtime-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      blockOwnerDeletion: true
      controller: true
      kind: ICP4AAutomationDecisionService
      name: icp4adeploy
      uid: 56cbbb22-a511-4834-b097-af38c2c69a38
    resourceVersion: "41766621"
    uid: 500969b1-3bca-459f-a411-37ccf9b8e182
  spec:
    extensions: |-
      [{
          "extension_point_id": "zen_front_door",
          "extension_name": "ads-runtime-front-door",
          "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
          }
      }]
    nginx.conf: "location ~ ^/ads/runtime/api/v1/(about|health)$\n{\n  proxy_set_header
      Host $host;\n  proxy_set_header X-Forwarded-Host $host;\n  proxy_set_header
      X-Forwarded-Protocol https;\n  proxy_set_header X-ADS-Correlation-Id $request_id;\n
      \ proxy_pass https://icp4adeploy-ads-runtime-service.cp4ba.svc.cluster.local:9443;\n}\n\nlocation
      /ads/runtime\n{\n  access_by_lua_block {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if (auth_header == nil)
      then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n  }\n  proxy_set_header Host $host;\n
      \ proxy_set_header X-Forwarded-Host $host;\n  proxy_set_header X-Forwarded-Protocol
      https;\n  proxy_set_header X-ADS-Correlation-Id $request_id;\n  proxy_pass https://adsruntimeservice-upstream;\n
      \ proxy_set_header Connection \"\";\n  proxy_buffer_size          256k;\n  proxy_buffers
      \             8 512k;\n  proxy_busy_buffers_size    512k;\n  proxy_connect_timeout
      \  300;\n  proxy_send_timeout      300;\n  proxy_read_timeout      300;\n  \n}\n\nlocation
      /ads/asra/api\n{\n  access_by_lua_block {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if (auth_header == nil)
      then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n  }\n  proxy_set_header Host $host;\n
      \ proxy_set_header X-Forwarded-Host $host;\n  proxy_set_header X-Forwarded-Protocol
      https;\n  proxy_set_header X-ADS-Correlation-Id $request_id;\n  proxy_pass https://adsruntimeservice-upstream;\n
      \ proxy_set_header Connection \"\";\n  proxy_buffer_size          256k;\n  proxy_buffers
      \             8 512k;\n  proxy_busy_buffers_size    512k;\n  proxy_connect_timeout
      \  300;\n  proxy_send_timeout      300;\n  proxy_read_timeout      300;\n  \n}\n\n"
    upstream.conf: "upstream adsruntimeservice-upstream\n{\n  least_conn;\n  keepalive
      500;\n  keepalive_timeout 60s;\n  keepalive_requests 1000;\n  \n  server icp4adeploy-ads-runtime-service.cp4ba.svc.cluster.local:9443;\n}"
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:42:03.686569+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:00:17Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:42:07Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:05:28Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1t7XG4gICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgImV4dGVuc2lvbl9uYW1lIjogImFkcy1ydW50aW1lLWZyb250LWRvb3IiLFxuICAgICJkZXRhaWxzIjoge1xuICAgICAgICAidXBzdHJlYW1fY29uZiI6ICJ1cHN0cmVhbS5jb25mIixcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICB9XG59XScsICduZ2lueC5jb25mJzogJ2xvY2F0aW9uIH4gXi9hZHMvcnVudGltZS9hcGkvdjEvKGFib3V0fGhlYWx0aCkkXG57XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Ib3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvY29sIGh0dHBzO1xuICBwcm94eV9zZXRfaGVhZGVyIFgtQURTLUNvcnJlbGF0aW9uLUlkICRyZXF1ZXN0X2lkO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktYWRzLXJ1bnRpbWUtc2VydmljZS5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbDo5NDQzO1xufVxuXG5sb2NhdGlvbiAvYWRzL3J1bnRpbWVcbntcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgPT0gbmlsKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbHNlaWYgKHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw1KX49IkJhc2ljIikgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZW5kXG4gIH1cbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG9jb2wgaHR0cHM7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1BRFMtQ29ycmVsYXRpb24tSWQgJHJlcXVlc3RfaWQ7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9hZHNydW50aW1lc2VydmljZS11cHN0cmVhbTtcbiAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICIiO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAgIDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgICAgICAzMDA7XG4gIFxufVxuXG5sb2NhdGlvbiAvYWRzL2FzcmEvYXBpXG57XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKGF1dGhfaGVhZGVyID09IG5pbCkgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVuZFxuICB9XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Ib3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvY29sIGh0dHBzO1xuICBwcm94eV9zZXRfaGVhZGVyIFgtQURTLUNvcnJlbGF0aW9uLUlkICRyZXF1ZXN0X2lkO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYWRzcnVudGltZXNlcnZpY2UtdXBzdHJlYW07XG4gIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAiIjtcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAgICAgMzAwO1xuICBcbn1cblxuJywgJ3Vwc3RyZWFtLmNvbmYnOiAndXBzdHJlYW0gYWRzcnVudGltZXNlcnZpY2UtdXBzdHJlYW1cbntcbiAgbGVhc3RfY29ubjtcbiAga2VlcGFsaXZlIDUwMDtcbiAga2VlcGFsaXZlX3RpbWVvdXQgNjBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgMTAwMDtcbiAgXG4gIHNlcnZlciBpY3A0YWRlcGxveS1hZHMtcnVudGltZS1zZXJ2aWNlLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsOjk0NDM7XG59J30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    annotations:
      checksum_ban_ips: 5786f241194587a14b465c3f7c0734acafc82b06
      checksum_zen_performance: da39a3ee5e6b4b0d3255bfef95601890afd80709
      total_ban_pods: "1"
    creationTimestamp: "2025-12-07T02:11:57Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 2
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: ban
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-ban-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41761547"
    uid: f859124e-34e9-4adf-83da-6eda03b3e13b
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-ban-zen-extension",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /icn/navigator/
      {
        set $http_banaffinityvars '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          jwtcheck.auth()
          local cookie_session_id = 'ibm-private-cloud-session-id'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          local session_id_value = ngx.var[cookie_session_id_var]
          ngx.var.http_banaffinityvars = session_id_value
        }
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://ban-server/navigator/;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /icn/
      {
        set $http_banaffinityvars '';
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          jwtcheck.auth()
          local cookie_session_id = 'ibm-private-cloud-session-id'
          local cookie_session_id_var = "cookie_" .. cookie_session_id
          local session_id_value = ngx.var[cookie_session_id_var]
          ngx.var.http_banaffinityvars = session_id_value
        }
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://ban-server/;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /icn/sync/
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://ban-server/sync/;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
    upstream.conf: |-
      upstream ban-server {
        keepalive 32;
        keepalive_timeout 30s;
        keepalive_requests 500;
        hash $http_banaffinityvars consistent;
        server 10-131-0-151.cp4ba.pod:9443 max_fails=1 fail_timeout=60s;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:37:48.298446+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T02:15:13Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:37:51Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T02:18:53Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktYmFuLXplbi1leHRlbnNpb24iLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJ1cHN0cmVhbV9jb25mIjogInVwc3RyZWFtLmNvbmYiLFxuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvaWNuL25hdmlnYXRvci9cbntcbiAgc2V0ICRodHRwX2JhbmFmZmluaXR5dmFycyBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgand0Y2hlY2suYXV0aCgpXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2libS1wcml2YXRlLWNsb3VkLXNlc3Npb24taWRcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICBuZ3gudmFyLmh0dHBfYmFuYWZmaW5pdHl2YXJzID0gc2Vzc2lvbl9pZF92YWx1ZVxuICB9XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtWkVOLVJPVVRJTkcgXCckaG9zdFwnO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYmFuLXNlcnZlci9uYXZpZ2F0b3IvO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG59XG5sb2NhdGlvbiAvaWNuL1xue1xuICBzZXQgJGh0dHBfYmFuYWZmaW5pdHl2YXJzIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBqd3RjaGVjay5hdXRoKClcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWJtLXByaXZhdGUtY2xvdWQtc2Vzc2lvbi1pZFwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbG9jYWwgc2Vzc2lvbl9pZF92YWx1ZSA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgIG5neC52YXIuaHR0cF9iYW5hZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gIH1cbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9iYW4tc2VydmVyLztcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMzAwO1xufVxubG9jYXRpb24gL2ljbi9zeW5jL1xue1xuICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2Jhbi1zZXJ2ZXIvc3luYy87XG4gIHByb3h5X2J1ZmZlcl9zaXplICAgICAgICAgIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgICAgICAgICAgICAgIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgICAgNTEyaztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbn0nLCAndXBzdHJlYW0uY29uZic6ICd1cHN0cmVhbSBiYW4tc2VydmVyIHtcbiAga2VlcGFsaXZlIDMyO1xuICBrZWVwYWxpdmVfdGltZW91dCAzMHM7XG4gIGtlZXBhbGl2ZV9yZXF1ZXN0cyA1MDA7XG4gIGhhc2ggJGh0dHBfYmFuYWZmaW5pdHl2YXJzIGNvbnNpc3RlbnQ7XG4gIHNlcnZlciAxMC0xMzEtMC0xNTEuY3A0YmEucG9kOjk0NDMgbWF4X2ZhaWxzPTEgZmFpbF90aW1lb3V0PTYwcztcbn0nfQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:57:04Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: content
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-cmis-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41768395"
    uid: b2f10ded-43c3-4048-a006-29333fb9b4a3
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-cmis-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /cmis/openfncmis_wlp
       {
        access_by_lua_block {
        local jwtcheck = require("nginx_data.verify-jwt")
        local auth_header = ngx.var.http_Authorization
        if (auth_header == nil) then
            jwtcheck.auth()
        elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
           end
        }
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-cmis-svc.cp4ba.svc:9443/cmis/openfncmis_wlp;
        proxy_buffer_size 256k;
        proxy_buffers 8 512k;
        proxy_busy_buffers_size 512k;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /cmis/openfncmis_wlp/ping.jsp
       {
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-cmis-svc.cp4ba.svc:9443/cmis/openfncmis_wlp/ping.jsp;
        proxy_buffer_size 256k;
        proxy_buffers 8 512k;
        proxy_busy_buffers_size 512k;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:43:34.792511+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:57:54Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:43:37Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:02:22Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktY21pcy16ZW4tZXh0ZW5zaW9uIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvY21pcy9vcGVuZm5jbWlzX3dscFxuIHtcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICBpZiAoYXV0aF9oZWFkZXIgPT0gbmlsKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWNtaXMtc3ZjLmNwNGJhLnN2Yzo5NDQzL2NtaXMvb3BlbmZuY21pc193bHA7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMzAwO1xufVxubG9jYXRpb24gL2NtaXMvb3BlbmZuY21pc193bHAvcGluZy5qc3BcbiB7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtWkVOLVJPVVRJTkcgXCckaG9zdFwnO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktY21pcy1zdmMuY3A0YmEuc3ZjOjk0NDMvY21pcy9vcGVuZm5jbWlzX3dscC9waW5nLmpzcDtcbiAgcHJveHlfYnVmZmVyX3NpemUgMjU2aztcbiAgcHJveHlfYnVmZmVycyA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplIDUxMms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG59J30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:17:12Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    name: icp4adeploy-cp4ba-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4ACluster
      name: icp4adeploy
      uid: fd59d459-79de-48ea-83b1-ecac90d65c93
    resourceVersion: "41761601"
    uid: 827bf060-d65e-4769-8774-29b64d27375a
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-cp4ba-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      ignore_invalid_headers off;
      underscores_in_headers on;
      set $affinityvars "0";
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:37:51.59371+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:17:12Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:37:54Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:19:32Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktY3A0YmEtemVuLWV4dGVuc2lvbiIsXG4gICAgICAiZGV0YWlscyI6IHtcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAnaWdub3JlX2ludmFsaWRfaGVhZGVycyBvZmY7XG51bmRlcnNjb3Jlc19pbl9oZWFkZXJzIG9uO1xuc2V0ICRhZmZpbml0eXZhcnMgIjAiOyd9
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:34:01Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: adp
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-cpds-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41766643"
    uid: 3d66b078-b9e6-47b7-a10b-0a71aed5d3a9
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-cpds-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /adp/cpds/ibm-dba-content-deployment/
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-cpds-svc.cp4ba.svc:9443/ibm-dba-content-deployment/;
        proxy_buffer_size 256k;
        proxy_connect_timeout 300;
        proxy_read_timeout  300;
        proxy_send_timeout  300;
        proxy_buffers 8 512k;
        proxy_busy_buffers_size 512k;
      }
      location /adp/cpds/deployment/
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-cpds-svc.cp4ba.svc:9443/deployment/;
        proxy_buffer_size 265k;
        proxy_connect_timeout 300;
        proxy_read_timeout  300;
        proxy_send_timeout  300;
        proxy_buffers 8 512k;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:42:04.485431+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:34:02Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:42:08Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:37:32Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktY3Bkcy16ZW4tZXh0ZW5zaW9uIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICJsb2NhdGlvbiAvYWRwL2NwZHMvaWJtLWRiYS1jb250ZW50LWRlcGxveW1lbnQvXG57XG4gIGFjY2Vzc19ieV9sdWFfZmlsZSAvbmdpbnhfZGF0YS9jaGVja2p3dC5sdWE7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtWkVOLVJPVVRJTkcgJyRob3N0JztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWNwZHMtc3ZjLmNwNGJhLnN2Yzo5NDQzL2libS1kYmEtY29udGVudC1kZXBsb3ltZW50LztcbiAgcHJveHlfYnVmZmVyX3NpemUgMjU2aztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgMzAwO1xuICBwcm94eV9idWZmZXJzIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgNTEyaztcbn1cbmxvY2F0aW9uIC9hZHAvY3Bkcy9kZXBsb3ltZW50L1xue1xuICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HICckaG9zdCc7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1jcGRzLXN2Yy5jcDRiYS5zdmM6OTQ0My9kZXBsb3ltZW50LztcbiAgcHJveHlfYnVmZmVyX3NpemUgMjY1aztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgMzAwO1xuICBwcm94eV9idWZmZXJzIDggNTEyaztcbn0ifQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    annotations:
      checksum_cpe_ips: 3baafc68c4db86055eea2866619424f2331d5be0
      checksum_zen_performance: da39a3ee5e6b4b0d3255bfef95601890afd80709
      total_cpe_pods: "1"
    creationTimestamp: "2025-12-07T00:43:15Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 2
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: cpe
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-cpe-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41766672"
    uid: 6a00c8cf-5b4e-4caa-9fc2-c34892d57d1b
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-cpe-zen-extension",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: "location /cpe/acce/\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    jwtcheck.auth()\n
      \   local cookie_session_id = 'ibm-private-cloud-session-id'\n    local cookie_session_id_var
      = \"cookie_\" .. cookie_session_id\n    local session_id_value = ngx.var[cookie_session_id_var]\n
      \   ngx.var.http_cpeaffinityvars = session_id_value\n  }\n  proxy_set_header
      Host $http_host;\n  proxy_set_header X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/acce/;\n
      \ proxy_buffer_size 256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout
      300;\n  proxy_send_timeout 300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n}\nlocation /cpe/wsi/FNCEWS40MTOM\n{\n  set $http_cpeaffinityvars '';\n
      \ access_by_lua_block {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if (auth_header and
      string.sub(auth_header,1,6) == \"Bearer\") then\n      -- ngx.log(ngx.STDERR,
      \"Validating Bearer token\")\n      jwtcheck.auth()\n      local cookie_session_id
      = 'ibm-private-cloud-session-id'\n      local cookie_session_id_var = \"cookie_\"
      .. cookie_session_id\n      local session_id_value = ngx.var[cookie_session_id_var]\n
      \     ngx.var.http_cpeaffinityvars = session_id_value\n    else\n      -- ngx.log(ngx.STDERR,
      \"pass-through auth to CPE\")\n    end\n  }\n  proxy_set_header Host $http_host;\n
      \ proxy_set_header X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/wsi/FNCEWS40MTOM;\n
      \ proxy_buffer_size 256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout
      300;\n  proxy_send_timeout 300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n}\nlocation /cpe/FileNet/Engine\n{\n  set $http_cpeaffinityvars '';\n
      \ access_by_lua_block {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n
      \   jwtcheck.auth()\n    local cookie_session_id = 'ibm-private-cloud-session-id'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    local
      session_id_value = ngx.var[cookie_session_id_var]\n    ngx.var.http_cpeaffinityvars
      = session_id_value\n  }\n  proxy_set_header Host $http_host;\n  proxy_set_header
      X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/FileNet/Engine;\n  proxy_buffer_size
      256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout 300;\n  proxy_send_timeout
      300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size 512k;\n}\nlocation
      /cpe/peengine\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block {     \n
      \   local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local auth_header
      = ngx.var.http_Authorization\n    if (auth_header and string.sub(auth_header,1,6)
      == \"Bearer\") then\n      -- ngx.log(ngx.STDERR, \"Validating Bearer token\")\n
      \     jwtcheck.auth()\n      local cookie_session_id = 'ibm-private-cloud-session-id'\n
      \     local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n      local
      session_id_value = ngx.var[cookie_session_id_var]\n      ngx.var.http_cpeaffinityvars
      = session_id_value\n    else\n      -- ngx.log(ngx.STDERR, \"pass-through auth
      to CPE\")\n    end\n  }\n  proxy_set_header Host $http_host;\n  proxy_set_header
      X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/peengine;\n  proxy_buffer_size
      256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout 300;\n  proxy_send_timeout
      300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size 512k;\n}\nlocation
      /cpe/peengine/P8BPMREST\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local auth_header
      = ngx.var.http_Authorization\n    if (auth_header and string.sub(auth_header,1,5)
      == \"Basic\") then\n      --ngx.log(ngx.STDERR, \"pass-through auth to CPE\")\n
      \   else\n      jwtcheck.auth()\n      local cookie_session_id = 'ibm-private-cloud-session-id'\n
      \     local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n      local
      session_id_value = ngx.var[cookie_session_id_var]\n      ngx.var.http_cpeaffinityvars
      = session_id_value\n    end\n  }\n  proxy_set_header Host $host;\n  proxy_set_header
      X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/peengine/P8BPMREST;\n
      \ proxy_buffer_size 256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout
      300;\n  proxy_send_timeout 300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n}\nlocation /cpe/pewsi\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local auth_header
      = ngx.var.http_Authorization\n    if (auth_header and string.sub(auth_header,1,6)
      == \"Bearer\") then\n      -- ngx.log(ngx.STDERR, \"Validating Bearer token\")\n
      \     jwtcheck.auth()\n      local cookie_session_id = 'ibm-private-cloud-session-id'\n
      \     local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n      local
      session_id_value = ngx.var[cookie_session_id_var]\n      ngx.var.http_cpeaffinityvars
      = session_id_value\n    else\n      -- ngx.log(ngx.STDERR, \"pass-through auth
      to CPE\")\n    end\n  }\n  proxy_set_header Host $host;\n  proxy_set_header
      X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/pewsi;\n  proxy_buffer_size
      256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout 300;\n  proxy_send_timeout
      300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size 512k;\n}\nlocation
      /cpe/peengine/IOR/ping\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    jwtcheck.auth()\n
      \   local cookie_session_id = 'ibm-private-cloud-session-id'\n    local cookie_session_id_var
      = \"cookie_\" .. cookie_session_id\n    local session_id_value = ngx.var[cookie_session_id_var]\n
      \   ngx.var.http_cpeaffinityvars = session_id_value\n  }\n  proxy_set_header
      Host $http_host;\n  proxy_set_header X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/peengine/IOR/ping;\n
      \ proxy_buffer_size 256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout
      300;\n  proxy_send_timeout 300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n}\nlocation /cpe/ibmccepo\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local auth_header
      = ngx.var.http_Authorization\n    if (auth_header and string.sub(auth_header,1,6)
      == \"Bearer\") then\n      -- ngx.log(ngx.STDERR, \"Validating Bearer token\")\n
      \     jwtcheck.auth()\n      local cookie_session_id = 'ibm-private-cloud-session-id'\n
      \     local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n      local
      session_id_value = ngx.var[cookie_session_id_var]\n      ngx.var.http_cpeaffinityvars
      = session_id_value\n    else\n      -- ngx.log(ngx.STDERR, \"pass-through auth
      to CPE\")\n    end\n  }\n  proxy_set_header Host $http_host;\n  proxy_set_header
      X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/ibmccepo;\n  proxy_buffer_size
      256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout 300;\n  proxy_send_timeout
      300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size 512k;\n}\nlocation
      /cpe/P8CE\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block {\n    local
      jwtcheck = require(\"nginx_data.verify-jwt\")\n    jwtcheck.auth()\n    local
      cookie_session_id = 'ibm-private-cloud-session-id'\n    local cookie_session_id_var
      = \"cookie_\" .. cookie_session_id\n    local session_id_value = ngx.var[cookie_session_id_var]\n
      \   ngx.var.http_cpeaffinityvars = session_id_value\n  }\n  proxy_set_header
      Host $http_host;\n  proxy_set_header X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/cpe/P8CE;\n
      \ proxy_buffer_size 256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout
      300;\n  proxy_send_timeout 300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n}\nlocation /clientDownload\n{\n  set $http_cpeaffinityvars '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    jwtcheck.auth()\n
      \   local cookie_session_id = 'ibm-private-cloud-session-id'\n    local cookie_session_id_var
      = \"cookie_\" .. cookie_session_id\n    local session_id_value = ngx.var[cookie_session_id_var]\n
      \   ngx.var.http_cpeaffinityvars = session_id_value\n  }\n  proxy_set_header
      Host $http_host;\n  proxy_set_header X-ZEN-ROUTING '$host';\n  proxy_pass https://cpe-server/clientDownload;\n
      \ proxy_buffer_size 256k;\n  proxy_connect_timeout 300;\n  proxy_read_timeout
      300;\n  proxy_send_timeout 300;\n  proxy_buffers 8 512k;\n  proxy_busy_buffers_size
      512k;\n}"
    upstream.conf: |-
      upstream cpe-server {
        keepalive 32;
        keepalive_timeout 30s;
        keepalive_requests 500;
        hash $http_cpeaffinityvars consistent;
        server 10-129-3-128.cp4ba.pod:9443 max_fails=1 fail_timeout=60s;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:42:07.093308+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:43:15Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:42:10Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:47:29Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktY3BlLXplbi1leHRlbnNpb24iLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJ1cHN0cmVhbV9jb25mIjogInVwc3RyZWFtLmNvbmYiLFxuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvY3BlL2FjY2UvXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpYm0tcHJpdmF0ZS1jbG91ZC1zZXNzaW9uLWlkXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBsb2NhbCBzZXNzaW9uX2lkX3ZhbHVlID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbmd4LnZhci5odHRwX2NwZWFmZmluaXR5dmFycyA9IHNlc3Npb25faWRfdmFsdWVcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvYWNjZS87XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xufVxubG9jYXRpb24gL2NwZS93c2kvRk5DRVdTNDBNVE9NXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgYW5kIHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw2KSA9PSAiQmVhcmVyIikgdGhlblxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAiVmFsaWRhdGluZyBCZWFyZXIgdG9rZW4iKVxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWJtLXByaXZhdGUtY2xvdWQtc2Vzc2lvbi1pZFwnXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICAgIG5neC52YXIuaHR0cF9jcGVhZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gICAgZWxzZVxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAicGFzcy10aHJvdWdoIGF1dGggdG8gQ1BFIilcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvd3NpL0ZOQ0VXUzQwTVRPTTtcbiAgcHJveHlfYnVmZmVyX3NpemUgMjU2aztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfYnVmZmVycyA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplIDUxMms7XG59XG5sb2NhdGlvbiAvY3BlL0ZpbGVOZXQvRW5naW5lXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpYm0tcHJpdmF0ZS1jbG91ZC1zZXNzaW9uLWlkXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBsb2NhbCBzZXNzaW9uX2lkX3ZhbHVlID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbmd4LnZhci5odHRwX2NwZWFmZmluaXR5dmFycyA9IHNlc3Npb25faWRfdmFsdWVcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvRmlsZU5ldC9FbmdpbmU7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xufVxubG9jYXRpb24gL2NwZS9wZWVuZ2luZVxue1xuICBzZXQgJGh0dHBfY3BlYWZmaW5pdHl2YXJzIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sgeyAgICAgXG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgYW5kIHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw2KSA9PSAiQmVhcmVyIikgdGhlblxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAiVmFsaWRhdGluZyBCZWFyZXIgdG9rZW4iKVxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWJtLXByaXZhdGUtY2xvdWQtc2Vzc2lvbi1pZFwnXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICAgIG5neC52YXIuaHR0cF9jcGVhZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gICAgZWxzZVxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAicGFzcy10aHJvdWdoIGF1dGggdG8gQ1BFIilcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvcGVlbmdpbmU7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xufVxubG9jYXRpb24gL2NwZS9wZWVuZ2luZS9QOEJQTVJFU1RcbntcbiAgc2V0ICRodHRwX2NwZWFmZmluaXR5dmFycyBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICAgIGlmIChhdXRoX2hlYWRlciBhbmQgc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpID09ICJCYXNpYyIpIHRoZW5cbiAgICAgIC0tbmd4LmxvZyhuZ3guU1RERVJSLCAicGFzcy10aHJvdWdoIGF1dGggdG8gQ1BFIilcbiAgICBlbHNlXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpYm0tcHJpdmF0ZS1jbG91ZC1zZXNzaW9uLWlkXCdcbiAgICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgICAgbG9jYWwgc2Vzc2lvbl9pZF92YWx1ZSA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXVxuICAgICAgbmd4LnZhci5odHRwX2NwZWFmZmluaXR5dmFycyA9IHNlc3Npb25faWRfdmFsdWVcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9jcGUtc2VydmVyL3BlZW5naW5lL1A4QlBNUkVTVDtcbiAgcHJveHlfYnVmZmVyX3NpemUgMjU2aztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfYnVmZmVycyA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplIDUxMms7XG59XG5sb2NhdGlvbiAvY3BlL3Bld3NpXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgYW5kIHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw2KSA9PSAiQmVhcmVyIikgdGhlblxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAiVmFsaWRhdGluZyBCZWFyZXIgdG9rZW4iKVxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWJtLXByaXZhdGUtY2xvdWQtc2Vzc2lvbi1pZFwnXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICAgIG5neC52YXIuaHR0cF9jcGVhZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gICAgZWxzZVxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAicGFzcy10aHJvdWdoIGF1dGggdG8gQ1BFIilcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1aRU4tUk9VVElORyBcJyRob3N0XCc7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9jcGUtc2VydmVyL3Bld3NpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAyNTZrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgMzAwO1xuICBwcm94eV9idWZmZXJzIDggNTEyaztcbiAgcHJveHlfYnVzeV9idWZmZXJzX3NpemUgNTEyaztcbn1cbmxvY2F0aW9uIC9jcGUvcGVlbmdpbmUvSU9SL3BpbmdcbntcbiAgc2V0ICRodHRwX2NwZWFmZmluaXR5dmFycyBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgand0Y2hlY2suYXV0aCgpXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2libS1wcml2YXRlLWNsb3VkLXNlc3Npb24taWRcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICBuZ3gudmFyLmh0dHBfY3BlYWZmaW5pdHl2YXJzID0gc2Vzc2lvbl9pZF92YWx1ZVxuICB9XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtWkVOLVJPVVRJTkcgXCckaG9zdFwnO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vY3BlLXNlcnZlci9wZWVuZ2luZS9JT1IvcGluZztcbiAgcHJveHlfYnVmZmVyX3NpemUgMjU2aztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfYnVmZmVycyA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplIDUxMms7XG59XG5sb2NhdGlvbiAvY3BlL2libWNjZXBvXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgYW5kIHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw2KSA9PSAiQmVhcmVyIikgdGhlblxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAiVmFsaWRhdGluZyBCZWFyZXIgdG9rZW4iKVxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnaWJtLXByaXZhdGUtY2xvdWQtc2Vzc2lvbi1pZFwnXG4gICAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICAgIG5neC52YXIuaHR0cF9jcGVhZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gICAgZWxzZVxuICAgICAgLS0gbmd4LmxvZyhuZ3guU1RERVJSLCAicGFzcy10aHJvdWdoIGF1dGggdG8gQ1BFIilcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvaWJtY2NlcG87XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xufVxubG9jYXRpb24gL2NwZS9QOENFXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpYm0tcHJpdmF0ZS1jbG91ZC1zZXNzaW9uLWlkXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBsb2NhbCBzZXNzaW9uX2lkX3ZhbHVlID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbmd4LnZhci5odHRwX2NwZWFmZmluaXR5dmFycyA9IHNlc3Npb25faWRfdmFsdWVcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvY3BlL1A4Q0U7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xufVxubG9jYXRpb24gL2NsaWVudERvd25sb2FkXG57XG4gIHNldCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdpYm0tcHJpdmF0ZS1jbG91ZC1zZXNzaW9uLWlkXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBsb2NhbCBzZXNzaW9uX2lkX3ZhbHVlID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdXG4gICAgbmd4LnZhci5odHRwX2NwZWFmZmluaXR5dmFycyA9IHNlc3Npb25faWRfdmFsdWVcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2NwZS1zZXJ2ZXIvY2xpZW50RG93bmxvYWQ7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xufScsICd1cHN0cmVhbS5jb25mJzogJ3Vwc3RyZWFtIGNwZS1zZXJ2ZXIge1xuICBrZWVwYWxpdmUgMzI7XG4gIGtlZXBhbGl2ZV90aW1lb3V0IDMwcztcbiAga2VlcGFsaXZlX3JlcXVlc3RzIDUwMDtcbiAgaGFzaCAkaHR0cF9jcGVhZmZpbml0eXZhcnMgY29uc2lzdGVudDtcbiAgc2VydmVyIDEwLTEyOS0zLTEyOC5jcDRiYS5wb2Q6OTQ0MyBtYXhfZmFpbHM9MSBmYWlsX3RpbWVvdXQ9NjBzO1xufSd9
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:06:28Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: content
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-graphql-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41759387"
    uid: d02ff728-e79b-434d-a49d-5a24616e6826
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-graphql-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /content-services-graphql
       {
        access_by_lua_block {
        local jwtcheck = require("nginx_data.verify-jwt")
        local auth_header = ngx.var.http_Authorization
        if (auth_header == nil) then
            jwtcheck.auth()
        elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
           end
         }
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-graphql-svc.cp4ba.svc:9443/content-services-graphql;
        proxy_buffer_size 256k;
        proxy_connect_timeout 300;
        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_buffers 8 512k;
        proxy_busy_buffers_size 512k;
        }
      location /content-services-graphql/ping
        {
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-graphql-svc.cp4ba.svc:9443/content-services-graphql/ping;
        proxy_buffer_size 256k;
        proxy_connect_timeout 300;
        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_buffers 8 512k;
        proxy_busy_buffers_size 512k;
        }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:35:58.179137+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:06:28Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:36:03Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:09:46Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktZ3JhcGhxbC16ZW4tZXh0ZW5zaW9uIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvY29udGVudC1zZXJ2aWNlcy1ncmFwaHFsXG4ge1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gIGlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICBlbHNlaWYgKHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw1KX49IkJhc2ljIikgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgIGVuZFxuICAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HIFwnJGhvc3RcJztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWdyYXBocWwtc3ZjLmNwNGJhLnN2Yzo5NDQzL2NvbnRlbnQtc2VydmljZXMtZ3JhcGhxbDtcbiAgcHJveHlfYnVmZmVyX3NpemUgMjU2aztcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfYnVmZmVycyA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplIDUxMms7XG4gIH1cbmxvY2F0aW9uIC9jb250ZW50LXNlcnZpY2VzLWdyYXBocWwvcGluZ1xuICB7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtWkVOLVJPVVRJTkcgXCckaG9zdFwnO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktZ3JhcGhxbC1zdmMuY3A0YmEuc3ZjOjk0NDMvY29udGVudC1zZXJ2aWNlcy1ncmFwaHFsL3Bpbmc7XG4gIHByb3h5X2J1ZmZlcl9zaXplIDI1Nms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X2J1ZmZlcnMgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSA1MTJrO1xuICB9J30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T02:20:12Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: content
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-ier-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41763132"
    uid: 6bc8ea3d-bb07-417a-b434-76baf945f712
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-ier-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /ier/EnterpriseRecordsPlugin/IERApplicationPlugin.jar
      {
       proxy_set_header Host $http_host;
       proxy_set_header X-ZEN-ROUTING '$host';
       proxy_pass https://icp4adeploy-ier-svc.cp4ba.svc:9443/EnterpriseRecordsPlugin/IERApplicationPlugin.jar;
       proxy_buffer_size 265k;
       proxy_connect_timeout 300;
       proxy_read_timeout  300;
       proxy_send_timeout  300;
       proxy_buffers 8 512k;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:39:10.382226+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T02:20:12Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:39:14Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T02:23:51Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktaWVyLXplbi1leHRlbnNpb24iLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJsb2NhdGlvbl9jb25mIjogIm5naW54LmNvbmYiXG4gICAgICB9XG4gIH1cbl1cbicsICduZ2lueC5jb25mJzogImxvY2F0aW9uIC9pZXIvRW50ZXJwcmlzZVJlY29yZHNQbHVnaW4vSUVSQXBwbGljYXRpb25QbHVnaW4uamFyXG57XG4gcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HICckaG9zdCc7XG4gcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWllci1zdmMuY3A0YmEuc3ZjOjk0NDMvRW50ZXJwcmlzZVJlY29yZHNQbHVnaW4vSUVSQXBwbGljYXRpb25QbHVnaW4uamFyO1xuIHByb3h5X2J1ZmZlcl9zaXplIDI2NWs7XG4gcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiBwcm94eV9yZWFkX3RpbWVvdXQgIDMwMDtcbiBwcm94eV9zZW5kX3RpbWVvdXQgIDMwMDtcbiBwcm94eV9idWZmZXJzIDggNTEyaztcbn0ifQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:42:04Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: ibm-cp4ba-insights-engine
      app.kubernetes.io/component: ibm-cp4ba-insights-engine
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: ibm-cp4ba-insights-engine
      com.ibm.cp4a.networking/egress-allow-all: "true"
      com.ibm.cp4a.networking/egress-allow-cpfs: "true"
      com.ibm.cp4a.networking/egress-allow-elasticsearch: "true"
      com.ibm.cp4a.networking/egress-allow-k8s-services: "true"
      com.ibm.cp4a.networking/egress-allow-kafka: "true"
      com.ibm.cp4a.networking/egress-allow-same-namespace: "true"
      com.ibm.cp4a.networking/egress-deny-all: "true"
      com.ibm.cp4a.networking/egress-external-app: "true"
      com.ibm.cp4a.networking/egress-external-app-component: BAI
      component: zen-apikey-frontdoor-extn-cm
    name: icp4adeploy-insights-engine-zen-apikey-frontdoor-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: InsightsEngine
      name: icp4adeploy
      uid: 0dccbe7f-a81b-40ff-93c4-fe4ed623e700
    resourceVersion: "41763148"
    uid: 2bf0e501-e15e-4ddb-a00a-0ec82f895589
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-insights-engine-zen-apikey-frontdoor-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location ~* /pass-api-key/(.*)
      {
       access_by_lua_file /nginx_data/checkjwt.lua;
       proxy_set_header Host $host;
       proxy_pass https://127.0.0.1:8443/$1$is_args$args;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:39:10.776518+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:42:04Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:39:14Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:45:25Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktaW5zaWdodHMtZW5naW5lLXplbi1hcGlrZXktZnJvbnRkb29yLWV4dGVuc2lvbiIsXG4gICAgICAiZGV0YWlscyI6IHtcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAnbG9jYXRpb24gfiogL3Bhc3MtYXBpLWtleS8oLiopXG57XG4gYWNjZXNzX2J5X2x1YV9maWxlIC9uZ2lueF9kYXRhL2NoZWNrand0Lmx1YTtcbiBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gcHJveHlfcGFzcyBodHRwczovLzEyNy4wLjAuMTo4NDQzLyQxJGlzX2FyZ3MkYXJncztcbn0nfQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:44:17Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: ibm-cp4ba-insights-engine
      app.kubernetes.io/component: ibm-cp4ba-insights-engine
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: ibm-cp4ba-insights-engine
      com.ibm.cp4a.networking/egress-allow-all: "true"
      com.ibm.cp4a.networking/egress-allow-cpfs: "true"
      com.ibm.cp4a.networking/egress-allow-elasticsearch: "true"
      com.ibm.cp4a.networking/egress-allow-k8s-services: "true"
      com.ibm.cp4a.networking/egress-allow-kafka: "true"
      com.ibm.cp4a.networking/egress-allow-same-namespace: "true"
      com.ibm.cp4a.networking/egress-deny-all: "true"
      com.ibm.cp4a.networking/egress-external-app: "true"
      com.ibm.cp4a.networking/egress-external-app-component: BAI
      component: zen-extension-cr
    name: icp4adeploy-insights-engine-zen-extension-cr
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: InsightsEngine
      name: icp4adeploy
      uid: 0dccbe7f-a81b-40ff-93c4-fe4ed623e700
    resourceVersion: "41759403"
    uid: 415b424d-7835-4260-9465-2e55d1a93308
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-insights-engine-zen-extension-cr",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location ~ ^/bai-bpc/health/?$
      {
        proxy_set_header Host $host;
        rewrite ^/bai-bpc/health/?$ /health break;
        proxy_pass https://icp4adeploy-insights-engine-cockpit.cp4ba.svc:9443;
      }
      location /bai-bpc/
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $host;
        proxy_pass https://icp4adeploy-insights-engine-cockpit.cp4ba.svc:9443/;
      }
      location ~ ^/bai-management/api/v1/health/?$
      {
        proxy_set_header Host $host;
        rewrite ^/bai-management/api/v1/health/?$ /api/v1/health break;
        proxy_pass https://icp4adeploy-insights-engine-management-service:6898;
      }
      location ~ ^/bai-management/cli/?$
      {
        proxy_set_header Host $host;
        rewrite ^/bai-management/cli/?$ /cli break;
        proxy_pass https://icp4adeploy-insights-engine-management-service.cp4ba.svc:6898;
      }
      location /bai-management/
      {
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local auth_header = ngx.var.http_Authorization
          if (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
        }
        proxy_pass https://icp4adeploy-insights-engine-management-service.cp4ba.svc:6898/;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:35:59.074179+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:44:17Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:36:03Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:48:31Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktaW5zaWdodHMtZW5naW5lLXplbi1leHRlbnNpb24tY3IiLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJsb2NhdGlvbl9jb25mIjogIm5naW54LmNvbmYiXG4gICAgICB9XG4gIH1cbl1cbicsICduZ2lueC5jb25mJzogJ2xvY2F0aW9uIH4gXi9iYWktYnBjL2hlYWx0aC8/JFxue1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHJld3JpdGUgXi9iYWktYnBjL2hlYWx0aC8/JCAvaGVhbHRoIGJyZWFrO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktaW5zaWdodHMtZW5naW5lLWNvY2twaXQuY3A0YmEuc3ZjOjk0NDM7XG59XG5sb2NhdGlvbiAvYmFpLWJwYy9cbntcbiAgYWNjZXNzX2J5X2x1YV9maWxlIC9uZ2lueF9kYXRhL2NoZWNrand0Lmx1YTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktaW5zaWdodHMtZW5naW5lLWNvY2twaXQuY3A0YmEuc3ZjOjk0NDMvO1xufVxubG9jYXRpb24gfiBeL2JhaS1tYW5hZ2VtZW50L2FwaS92MS9oZWFsdGgvPyRcbntcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICByZXdyaXRlIF4vYmFpLW1hbmFnZW1lbnQvYXBpL3YxL2hlYWx0aC8/JCAvYXBpL3YxL2hlYWx0aCBicmVhaztcbiAgcHJveHlfcGFzcyBodHRwczovL2ljcDRhZGVwbG95LWluc2lnaHRzLWVuZ2luZS1tYW5hZ2VtZW50LXNlcnZpY2U6Njg5ODtcbn1cbmxvY2F0aW9uIH4gXi9iYWktbWFuYWdlbWVudC9jbGkvPyRcbntcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICByZXdyaXRlIF4vYmFpLW1hbmFnZW1lbnQvY2xpLz8kIC9jbGkgYnJlYWs7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS1pbnNpZ2h0cy1lbmdpbmUtbWFuYWdlbWVudC1zZXJ2aWNlLmNwNGJhLnN2Yzo2ODk4O1xufVxubG9jYXRpb24gL2JhaS1tYW5hZ2VtZW50L1xue1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICAgIGlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgfVxuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktaW5zaWdodHMtZW5naW5lLW1hbmFnZW1lbnQtc2VydmljZS5jcDRiYS5zdmM6Njg5OC87XG59J30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:50:46Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: icp4adeploy-ibm-odm-prod
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: decisions
      app.kubernetes.io/part-of: icp4adeploy
      release: icp4adeploy
    name: icp4adeploy-odm-zen-frontdoor-dc
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4AOperationalDecisionManager
      name: icp4adeploy
      uid: deeac883-5e7e-4a40-9699-300f00a36e7c
    resourceVersion: "41766706"
    uid: 8215ff9f-c3f0-42f2-a0d1-d2f8a3243812
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-odm-zen-frontdoor-dc",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /odm/decisioncenter {
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local auth_header = ngx.var.http_Authorization
          if (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
        }
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisioncenter-upstream;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /odm/decisioncenter-api {
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local auth_header = ngx.var.http_Authorization
          if (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
        }
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisioncenter-upstream/odm/decisioncenter-api;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /odm/decisioncenter/assets {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisioncenter-upstream/odm/decisioncenter/assets;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /odm/decisioncenter-dbdump {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisioncenter-upstream/odm/decisioncenter-dbdump;
        proxy_connect_timeout 1000;
        proxy_send_timeout 1000;
        proxy_read_timeout 1000;
      }
    upstream.conf: |-
      upstream decisioncenter-upstream {
        keepalive 32;
        keepalive_timeout 30s;
        keepalive_requests 500;
        server icp4adeploy-odm-decisioncenter:9453;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:42:08.884775+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:50:46Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:42:12Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:55:46Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktb2RtLXplbi1mcm9udGRvb3ItZGMiLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJ1cHN0cmVhbV9jb25mIjogInVwc3RyZWFtLmNvbmYiLFxuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvb2RtL2RlY2lzaW9uY2VudGVyIHtcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgPT0gbmlsKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbHNlaWYgKHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw1KX49IkJhc2ljIikgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZW5kXG4gIH1cbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG9jb2wgaHR0cHM7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9kZWNpc2lvbmNlbnRlci11cHN0cmVhbTtcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbn1cbmxvY2F0aW9uIC9vZG0vZGVjaXNpb25jZW50ZXItYXBpIHtcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgPT0gbmlsKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbHNlaWYgKHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw1KX49IkJhc2ljIikgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZW5kXG4gIH1cbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG9jb2wgaHR0cHM7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9kZWNpc2lvbmNlbnRlci11cHN0cmVhbS9vZG0vZGVjaXNpb25jZW50ZXItYXBpO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMzAwO1xufVxubG9jYXRpb24gL29kbS9kZWNpc2lvbmNlbnRlci9hc3NldHMge1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90b2NvbCBodHRwcztcbiAgcHJveHlfcGFzcyBodHRwczovL2RlY2lzaW9uY2VudGVyLXVwc3RyZWFtL29kbS9kZWNpc2lvbmNlbnRlci9hc3NldHM7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG59XG5sb2NhdGlvbiAvb2RtL2RlY2lzaW9uY2VudGVyLWRiZHVtcCB7XG4gIGFjY2Vzc19ieV9sdWFfZmlsZSAvbmdpbnhfZGF0YS9jaGVja2p3dC5sdWE7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Ib3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvY29sIGh0dHBzO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vZGVjaXNpb25jZW50ZXItdXBzdHJlYW0vb2RtL2RlY2lzaW9uY2VudGVyLWRiZHVtcDtcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDEwMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAxMDAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMTAwMDtcbn0nLCAndXBzdHJlYW0uY29uZic6ICd1cHN0cmVhbSBkZWNpc2lvbmNlbnRlci11cHN0cmVhbSB7XG4gIGtlZXBhbGl2ZSAzMjtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xuICBzZXJ2ZXIgaWNwNGFkZXBsb3ktb2RtLWRlY2lzaW9uY2VudGVyOjk0NTM7XG59J30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:50:47Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: icp4adeploy-ibm-odm-prod
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: decisions
      app.kubernetes.io/part-of: icp4adeploy
      release: icp4adeploy
    name: icp4adeploy-odm-zen-frontdoor-dr
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4AOperationalDecisionManager
      name: icp4adeploy
      uid: deeac883-5e7e-4a40-9699-300f00a36e7c
    resourceVersion: "41759531"
    uid: 02ad5efc-ebc6-437d-9fe3-3aa0d97fabc4
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-odm-zen-frontdoor-dr",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /odm/DecisionRunner/serverinfo {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisionrunner-upstream;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
      location /odm/DecisionRunner {
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local auth_header = ngx.var.http_Authorization
          if (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
        }
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisionrunner-upstream;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
    upstream.conf: |-
      upstream decisionrunner-upstream {
        keepalive 32;
        keepalive_timeout 30s;
        keepalive_requests 500;
        server icp4adeploy-odm-decisionrunner:9443;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:36:03.41404+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:50:47Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:36:08Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:56:50Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktb2RtLXplbi1mcm9udGRvb3ItZHIiLFxuICAgICAgImRldGFpbHMiOiB7XG4gICAgICAgICJ1cHN0cmVhbV9jb25mIjogInVwc3RyZWFtLmNvbmYiLFxuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICdsb2NhdGlvbiAvb2RtL0RlY2lzaW9uUnVubmVyL3NlcnZlcmluZm8ge1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90b2NvbCBodHRwcztcbiAgcHJveHlfcGFzcyBodHRwczovL2RlY2lzaW9ucnVubmVyLXVwc3RyZWFtO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgMzAwO1xuICBwcm94eV9zZW5kX3RpbWVvdXQgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMzAwO1xufVxubG9jYXRpb24gL29kbS9EZWNpc2lvblJ1bm5lciB7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKGF1dGhfaGVhZGVyID09IG5pbCkgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZWxzZWlmIChzdHJpbmcuc3ViKGF1dGhfaGVhZGVyLDEsNSl+PSJCYXNpYyIpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVuZFxuICB9XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Ib3N0ICRob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvY29sIGh0dHBzO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vZGVjaXNpb25ydW5uZXItdXBzdHJlYW07XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG59JywgJ3Vwc3RyZWFtLmNvbmYnOiAndXBzdHJlYW0gZGVjaXNpb25ydW5uZXItdXBzdHJlYW0ge1xuICBrZWVwYWxpdmUgMzI7XG4gIGtlZXBhbGl2ZV90aW1lb3V0IDMwcztcbiAga2VlcGFsaXZlX3JlcXVlc3RzIDUwMDtcbiAgc2VydmVyIGljcDRhZGVwbG95LW9kbS1kZWNpc2lvbnJ1bm5lcjo5NDQzO1xufSd9
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:50:48Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: icp4adeploy-ibm-odm-prod
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: decisions
      app.kubernetes.io/part-of: icp4adeploy
      release: icp4adeploy
    name: icp4adeploy-odm-zen-frontdoor-dsc
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4AOperationalDecisionManager
      name: icp4adeploy
      uid: deeac883-5e7e-4a40-9699-300f00a36e7c
    resourceVersion: "41764860"
    uid: 753bc261-c32f-4ce1-acfb-ce099dc80b8c
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-odm-zen-frontdoor-dsc",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /odm/res {
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local auth_header = ngx.var.http_Authorization
          if (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
        }
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisionserverconsole-upstream;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
    upstream.conf: |-
      upstream decisionserverconsole-upstream {
        keepalive 32;
        keepalive_timeout 30s;
        keepalive_requests 500;
        server icp4adeploy-odm-decisionserverconsole:9443;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:40:38.307966+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:50:48Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:40:41Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:57:54Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktb2RtLXplbi1mcm9udGRvb3ItZHNjIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAidXBzdHJlYW1fY29uZiI6ICJ1cHN0cmVhbS5jb25mIixcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAnbG9jYXRpb24gL29kbS9yZXMge1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICAgIGlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90b2NvbCBodHRwcztcbiAgcHJveHlfcGFzcyBodHRwczovL2RlY2lzaW9uc2VydmVyY29uc29sZS11cHN0cmVhbTtcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0IDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0IDMwMDtcbn0nLCAndXBzdHJlYW0uY29uZic6ICd1cHN0cmVhbSBkZWNpc2lvbnNlcnZlcmNvbnNvbGUtdXBzdHJlYW0ge1xuICBrZWVwYWxpdmUgMzI7XG4gIGtlZXBhbGl2ZV90aW1lb3V0IDMwcztcbiAga2VlcGFsaXZlX3JlcXVlc3RzIDUwMDtcbiAgc2VydmVyIGljcDRhZGVwbG95LW9kbS1kZWNpc2lvbnNlcnZlcmNvbnNvbGU6OTQ0Mztcbn0nfQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:50:50Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app: icp4adeploy-ibm-odm-prod
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: decisions
      app.kubernetes.io/part-of: icp4adeploy
      release: icp4adeploy
    name: icp4adeploy-odm-zen-frontdoor-dsr
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4AOperationalDecisionManager
      name: icp4adeploy
      uid: deeac883-5e7e-4a40-9699-300f00a36e7c
    resourceVersion: "41769223"
    uid: 444a9956-d87a-47f1-8647-45c9d288cde7
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-odm-zen-frontdoor-dsr",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /odm/DecisionService {
        access_by_lua_block {
          local jwtcheck = require("nginx_data.verify-jwt")
          local auth_header = ngx.var.http_Authorization
          if (auth_header == nil) then
            jwtcheck.auth()
          elseif (string.sub(auth_header,1,5)~="Basic") then
            jwtcheck.auth()
          end
        }
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Protocol https;
        proxy_pass https://decisionserverruntime-upstream;
        proxy_connect_timeout 1000;
        proxy_send_timeout 1000;
        proxy_read_timeout 1000;
        proxy_set_header Connection "";
      }
    upstream.conf: |-
      upstream decisionserverruntime-upstream
      {
        least_conn;
        keepalive 1000;
        keepalive_timeout 30s;
        keepalive_requests 500;
        server icp4adeploy-odm-decisionserverruntime:9443;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:44:18.981885+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:50:50Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:44:20Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:59:04Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktb2RtLXplbi1mcm9udGRvb3ItZHNyIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAidXBzdHJlYW1fY29uZiI6ICJ1cHN0cmVhbS5jb25mIixcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAnbG9jYXRpb24gL29kbS9EZWNpc2lvblNlcnZpY2Uge1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICAgIGlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgfVxuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7XG4gIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtSG9zdCAkaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90b2NvbCBodHRwcztcbiAgcHJveHlfcGFzcyBodHRwczovL2RlY2lzaW9uc2VydmVycnVudGltZS11cHN0cmVhbTtcbiAgcHJveHlfY29ubmVjdF90aW1lb3V0IDEwMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAxMDAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgMTAwMDtcbiAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICIiO1xufScsICd1cHN0cmVhbS5jb25mJzogJ3Vwc3RyZWFtIGRlY2lzaW9uc2VydmVycnVudGltZS11cHN0cmVhbVxue1xuICBsZWFzdF9jb25uO1xuICBrZWVwYWxpdmUgMTAwMDtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xuICBzZXJ2ZXIgaWNwNGFkZXBsb3ktb2RtLWRlY2lzaW9uc2VydmVycnVudGltZTo5NDQzO1xufSd9
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:42:43Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: ae-zen-config
      app.kubernetes.io/instance: icp4adeploy-pbk-aae
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: app-engine
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      icpdata_addon: "true"
      icpdata_addon_version: 25.0.0-07878
      release: 25.0.0
    name: icp4adeploy-pbk-zen-ext
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4ACluster
      name: icp4adeploy
      uid: fd59d459-79de-48ea-83b1-ecac90d65c93
    resourceVersion: "41763188"
    uid: 29e3fb1a-6919-4198-9493-c197f9fd0625
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "cp4ba-icp4adeploy-ae-pbk",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: "location ~ /ae-pbk/.*/suffix_/bpm/notification/cometd\n{\n  set $http_aeaffinityvars
      '';\n  set $aeAffinityCookieValue '';\n  access_by_lua_block {\n    local jwtcheck
      = require(\"nginx_data.verify-jwt\")\n    local b64 = require(\"ngx.base64\")\n
      \   local auth_header = ngx.var.http_Authorization\n    if ( ngx.var.request_method
      == \"OPTIONS\") then\n      auth_header = \"options_should_be_white_list_without_auth\"\n
      \   elseif (auth_header == nil) then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n    local cookie_session_id = 'ae-pbk-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_aeaffinityvars
      = ngx.var[cookie_session_id_var] \n    local aeNginxCache = ngx.shared.ae_pbk_nginx_cache\n
      \   local ips = aeNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-pbk-ae-service-headless.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-pbk-ae-service-headless.cp4ba.svc.cluster.local\", {\n
      \         qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      aeNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_aeaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_aeaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_aeaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_aeaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['aeAffinityCookieValue']
      = 'ae-pbk-affinity-cookie=' .. ngx.var.http_aeaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/ae-pbk'\n  }\n  add_header 'Set-Cookie' $aeAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  proxy_set_header Upgrade $http_upgrade;\n
      \ proxy_set_header Connection $http_connection;\n  rewrite ^ $request_uri;\n
      \ rewrite ^/(.*) $1 break;\n  proxy_pass https://ae-pbk-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_http_version 1.1;\n}\nlocation /ae-pbk/public-app/\n{\n  set
      $http_aeaffinityvars '';\n  set $aeAffinityCookieValue '';\n  access_by_lua_block
      {\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id = 'ae-pbk-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_aeaffinityvars
      = ngx.var[cookie_session_id_var] \n    local aeNginxCache = ngx.shared.ae_pbk_nginx_cache\n
      \   local ips = aeNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-pbk-ae-service-headless.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-pbk-ae-service-headless.cp4ba.svc.cluster.local\", {\n
      \         qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      aeNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_aeaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_aeaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_aeaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_aeaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['aeAffinityCookieValue']
      = 'ae-pbk-affinity-cookie=' .. ngx.var.http_aeaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/ae-pbk'\n  }\n  add_header 'Set-Cookie' $aeAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://ae-pbk-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n}\nlocation /ae-pbk/\n{\n  set $http_aeaffinityvars
      '';\n  set $aetrickcsrftoken '';\n  set $aetrickanescookieid '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local auth_header
      = ngx.var.http_Authorization\n    if (auth_header == nil) then\n      jwtcheck.auth()\n
      \   elseif (string.sub(auth_header,1,5)~=\"Basic\") then\n      jwtcheck.auth()\n
      \   end\n\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id
      = 'ae-pbk-affinity-cookie'\n    local cookie_session_id_var = \"cookie_\" ..
      cookie_session_id\n    ngx.var.http_aeaffinityvars = ngx.var[cookie_session_id_var]
      \n    local aeNginxCache = ngx.shared.ae_pbk_nginx_cache\n    local ips = aeNginxCache:get(\"ips\")\n
      \   if ips == nil then\n      local resolver = require \"resty.dns.resolver\"\n
      \     local r, err = resolver:new{\n          nameservers = { \"172.30.0.10\"
      },\n          retrans = 5,\n          timeout = 2000,\n          no_random =
      true,\n      }\n      ips = {}\n      local answers, err, tries = r:query(\"icp4adeploy-pbk-ae-service-headless.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-pbk-ae-service-headless.cp4ba.svc.cluster.local\", {\n
      \         qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      aeNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_aeaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_aeaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_aeaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_aeaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['aeAffinityCookieValue']
      = 'ae-pbk-affinity-cookie=' .. ngx.var.http_aeaffinityvars .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/ae-pbk'\n\n    if ( ngx.var[\"cookie_CSRF-TOKEN\"] ==
      nil) then\n      ngx.var['aetrickcsrftoken'] = ''\n    else\n      ngx.var['aetrickcsrftoken']
      = 'ae-pbk-CSRF-TOKEN=' .. ngx.var[\"cookie_CSRF-TOKEN\"] .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/'\n    end\n    if ( ngx.var[\"cookie_aenscookieid\"]
      == nil) then\n      ngx.var['aetrickanescookieid'] = ''\n    else\n      ngx.var['aetrickanescookieid']
      = 'ae-pbk-aenscookieid=' .. ngx.var[\"cookie_aenscookieid\"] .. '; Secure; HttpOnly;
      SameSite=Strict; Path=/'\n    end\n  }\n  add_header 'Set-Cookie' $aeAffinityCookieValue;\n
      \ proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n  rewrite ^/(.*)
      $1 break;\n  return 400;\n  proxy_pass https://ae-pbk-server/$uri;\n  proxy_buffer_size
      \         256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n  add_header 'Set-Cookie' $aetrickcsrftoken;\n  add_header
      'Set-Cookie' $aetrickanescookieid;\n}\nlocation /ae-pbk/zen-logout\n{\n  set
      $http_aeaffinityvars '';\n  access_by_lua_block {\n    local auth_header = ngx.var.http_Authorization\n
      \   local cookie_session_id = 'ibm-private-cloud-session-id'\n    local cookie_session_id_var
      = \"cookie_\" .. cookie_session_id\n    local session_id_value = ngx.var[cookie_session_id_var]\n
      \   if ( session_id_value == nil) then\n      ngx.var.http_aeaffinityvars =
      auth_header\n    else \n      ngx.var.http_aeaffinityvars = session_id_value\n
      \   end\n    local ae_csrf_token_value = ngx.var[\"cookie_ae-pbk-CSRF-TOKEN\"]\n
      \   local session_token_value = ngx.var[\"cookie_ae-pbk-aenscookieid\"]\n    if
      ( ae_csrf_token_value == nil) then\n    else\n      ngx.req.set_header('X-CSRF-TOKEN',
      ae_csrf_token_value)\n      ngx.req.set_header('Cookie', 'aenscookieid=' ..
      session_token_value .. ';' .. 'CSRF-TOKEN=' .. ae_csrf_token_value)\n    end\n
      \ }\n  proxy_method GET;\n  proxy_pass https://ae-pbk-server-noaff/ae-pbk/auth/logout;\n}"
    upstream.conf: |
      lua_shared_dict ae_pbk_nginx_cache 1m;
      upstream ae-pbk-server {
        server 127.0.0.1:443;
        balancer_by_lua_block {
          local balancer = require "ngx.balancer"
          local b64 = require("ngx.base64")
          local ip = b64.decode_base64url(ngx.var.http_aeaffinityvars)
          local ok , err = balancer.set_current_peer(ip,3001)
          if not ok then
            ngx.log(ngx.ERR, "failed to set the current peer: ", err)
            return ngx.exit(500)
          end
        }
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
      upstream ae-pbk-server-noaff {
        server icp4adeploy-pbk-ae-service.cp4ba.svc:443;
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:39:13.196159+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:42:43Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:39:16Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:46:44Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiY3A0YmEtaWNwNGFkZXBsb3ktYWUtcGJrIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAidXBzdHJlYW1fY29uZiI6ICJ1cHN0cmVhbS5jb25mIixcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAnbG9jYXRpb24gfiAvYWUtcGJrLy4qL3N1ZmZpeF8vYnBtL25vdGlmaWNhdGlvbi9jb21ldGRcbntcbiAgc2V0ICRodHRwX2FlYWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYWVBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnYWUtcGJrLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGFlTmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuYWVfcGJrX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYWVOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGlwcyA9IHt9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktcGJrLWFlLXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCBuaWwsIHt9KVxuICAgICAgaWYgdGFibGUuZ2V0bihhbnN3ZXJzKSA9PSAwIHRoZW5cbiAgICAgICAgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LXBiay1hZS1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwge1xuICAgICAgICAgIHF0eXBlID0gMjgsXG4gICAgICAgICAgYWRkaXRpb25hbF9zZWN0aW9uID0gdHJ1ZSxcbiAgICAgICAgfSwge30pXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gIlsiIC4uIGFucy5hZGRyZXNzIC4uICJdIlxuICAgICAgICBlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSBhbnMuYWRkcmVzc1xuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgYWVOZ2lueENhY2hlOnNldCgiaXBzIiwgaXBzLCAyMDAwKVxuICAgIGVuZFxuICAgIGxvY2FsIGNoZWNrZWQgPSBmYWxzZVxuICAgIGlmIG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycyA9PSBuaWwgdGhlblxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgIG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbHNlXG4gICAgICBsb2NhbCBpcFZhbHVlID0gYjY0LmRlY29kZV9iYXNlNjR1cmwobmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzKVxuICAgICAgZm9yIGkgPTEsIHRhYmxlLmdldG4oaXBzKSBkb1xuICAgICAgICBpZiBpcHNbaV0gPT0gaXBWYWx1ZSB0aGVuXG4gICAgICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoIG5vdCBjaGVja2VkICkgdGhlblxuICAgICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVuZFxuICAgIG5neC52YXJbXCdhZUFmZmluaXR5Q29va2llVmFsdWVcJ10gPSBcJ2FlLXBiay1hZmZpbml0eS1jb29raWU9XCcgLi4gbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L2FlLXBia1wnXG4gIH1cbiAgYWRkX2hlYWRlciBcJ1NldC1Db29raWVcJyAkYWVBZmZpbml0eUNvb2tpZVZhbHVlO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7XG4gIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAkaHR0cF9jb25uZWN0aW9uO1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcHJveHlfcGFzcyBodHRwczovL2FlLXBiay1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9odHRwX3ZlcnNpb24gMS4xO1xufVxubG9jYXRpb24gL2FlLXBiay9wdWJsaWMtYXBwL1xue1xuICBzZXQgJGh0dHBfYWVhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRhZUFmZmluaXR5Q29va2llVmFsdWUgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgYjY0ID0gcmVxdWlyZSgibmd4LmJhc2U2NCIpXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2FlLXBiay1hZmZpbml0eS1jb29raWVcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycyA9IG5neC52YXJbY29va2llX3Nlc3Npb25faWRfdmFyXSBcbiAgICBsb2NhbCBhZU5naW54Q2FjaGUgPSBuZ3guc2hhcmVkLmFlX3Bia19uZ2lueF9jYWNoZVxuICAgIGxvY2FsIGlwcyA9IGFlTmdpbnhDYWNoZTpnZXQoImlwcyIpXG4gICAgaWYgaXBzID09IG5pbCB0aGVuXG4gICAgICBsb2NhbCByZXNvbHZlciA9IHJlcXVpcmUgInJlc3R5LmRucy5yZXNvbHZlciJcbiAgICAgIGxvY2FsIHIsIGVyciA9IHJlc29sdmVyOm5ld3tcbiAgICAgICAgICBuYW1lc2VydmVycyA9IHsgIjE3Mi4zMC4wLjEwIiB9LFxuICAgICAgICAgIHJldHJhbnMgPSA1LFxuICAgICAgICAgIHRpbWVvdXQgPSAyMDAwLFxuICAgICAgICAgIG5vX3JhbmRvbSA9IHRydWUsXG4gICAgICB9XG4gICAgICBpcHMgPSB7fVxuICAgICAgbG9jYWwgYW5zd2VycywgZXJyLCB0cmllcyA9IHI6cXVlcnkoImljcDRhZGVwbG95LXBiay1hZS1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwgbmlsLCB7fSlcbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1wYmstYWUtc2VydmljZS1oZWFkbGVzcy5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIHtcbiAgICAgICAgICBxdHlwZSA9IDI4LFxuICAgICAgICAgIGFkZGl0aW9uYWxfc2VjdGlvbiA9IHRydWUsXG4gICAgICAgIH0sIHt9KVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9ICJbIiAuLiBhbnMuYWRkcmVzcyAuLiAiXSJcbiAgICAgICAgZW5kXG4gICAgICBlbHNlXG4gICAgICAgIGZvciBpLCBhbnMgaW4gaXBhaXJzKGFuc3dlcnMpIGRvXG4gICAgICAgICAgaXBzW2ldID0gYW5zLmFkZHJlc3NcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIGFlTmdpbnhDYWNoZTpzZXQoImlwcyIsIGlwcywgMjAwMClcbiAgICBlbmRcbiAgICBsb2NhbCBjaGVja2VkID0gZmFsc2VcbiAgICBpZiBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPT0gbmlsIHRoZW5cbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZWxzZVxuICAgICAgbG9jYWwgaXBWYWx1ZSA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycylcbiAgICAgIGZvciBpID0xLCB0YWJsZS5nZXRuKGlwcykgZG9cbiAgICAgICAgaWYgaXBzW2ldID09IGlwVmFsdWUgdGhlblxuICAgICAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgKCBub3QgY2hlY2tlZCApIHRoZW5cbiAgICAgIG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycyA9IGI2NC5lbmNvZGVfYmFzZTY0dXJsKGlwc1ttYXRoLnJhbmRvbSh0YWJsZS5nZXRuKGlwcykpXSlcbiAgICBlbmRcbiAgICBuZ3gudmFyW1wnYWVBZmZpbml0eUNvb2tpZVZhbHVlXCddID0gXCdhZS1wYmstYWZmaW5pdHktY29va2llPVwnIC4uIG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycyAuLiBcJzsgU2VjdXJlOyBIdHRwT25seTsgU2FtZVNpdGU9U3RyaWN0OyBQYXRoPS9hZS1wYmtcJ1xuICB9XG4gIGFkZF9oZWFkZXIgXCdTZXQtQ29va2llXCcgJGFlQWZmaW5pdHlDb29raWVWYWx1ZTtcbiAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRodHRwX2hvc3Q7XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICByZXR1cm4gNDAwO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYWUtcGJrLXNlcnZlci8kdXJpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAgIDMwMDtcbiAgcHJveHlfc2VuZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9yZWFkX3RpbWVvdXQgICAgICAzMDA7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG4gIHByb3h5X3NldF9oZWFkZXIgICAiQ29ubmVjdGlvbiIgIiI7XG59XG5sb2NhdGlvbiAvYWUtcGJrL1xue1xuICBzZXQgJGh0dHBfYWVhZmZpbml0eXZhcnMgXCdcJztcbiAgc2V0ICRhZXRyaWNrY3NyZnRva2VuIFwnXCc7XG4gIHNldCAkYWV0cmlja2FuZXNjb29raWVpZCBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBqd3RjaGVjayA9IHJlcXVpcmUoIm5naW54X2RhdGEudmVyaWZ5LWp3dCIpXG4gICAgbG9jYWwgYXV0aF9oZWFkZXIgPSBuZ3gudmFyLmh0dHBfQXV0aG9yaXphdGlvblxuICAgIGlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcblxuICAgIGxvY2FsIGI2NCA9IHJlcXVpcmUoIm5neC5iYXNlNjQiKVxuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkID0gXCdhZS1wYmstYWZmaW5pdHktY29va2llXCdcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZF92YXIgPSAiY29va2llXyIgLi4gY29va2llX3Nlc3Npb25faWRcbiAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl0gXG4gICAgbG9jYWwgYWVOZ2lueENhY2hlID0gbmd4LnNoYXJlZC5hZV9wYmtfbmdpbnhfY2FjaGVcbiAgICBsb2NhbCBpcHMgPSBhZU5naW54Q2FjaGU6Z2V0KCJpcHMiKVxuICAgIGlmIGlwcyA9PSBuaWwgdGhlblxuICAgICAgbG9jYWwgcmVzb2x2ZXIgPSByZXF1aXJlICJyZXN0eS5kbnMucmVzb2x2ZXIiXG4gICAgICBsb2NhbCByLCBlcnIgPSByZXNvbHZlcjpuZXd7XG4gICAgICAgICAgbmFtZXNlcnZlcnMgPSB7ICIxNzIuMzAuMC4xMCIgfSxcbiAgICAgICAgICByZXRyYW5zID0gNSxcbiAgICAgICAgICB0aW1lb3V0ID0gMjAwMCxcbiAgICAgICAgICBub19yYW5kb20gPSB0cnVlLFxuICAgICAgfVxuICAgICAgaXBzID0ge31cbiAgICAgIGxvY2FsIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS1wYmstYWUtc2VydmljZS1oZWFkbGVzcy5jcDRiYS5zdmMuY2x1c3Rlci5sb2NhbCIsIG5pbCwge30pXG4gICAgICBpZiB0YWJsZS5nZXRuKGFuc3dlcnMpID09IDAgdGhlblxuICAgICAgICBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktcGJrLWFlLXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBhZU5naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2FlQWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnYWUtcGJrLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYWUtcGJrXCdcblxuICAgIGlmICggbmd4LnZhclsiY29va2llX0NTUkYtVE9LRU4iXSA9PSBuaWwpIHRoZW5cbiAgICAgIG5neC52YXJbXCdhZXRyaWNrY3NyZnRva2VuXCddID0gXCdcJ1xuICAgIGVsc2VcbiAgICAgIG5neC52YXJbXCdhZXRyaWNrY3NyZnRva2VuXCddID0gXCdhZS1wYmstQ1NSRi1UT0tFTj1cJyAuLiBuZ3gudmFyWyJjb29raWVfQ1NSRi1UT0tFTiJdIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L1wnXG4gICAgZW5kXG4gICAgaWYgKCBuZ3gudmFyWyJjb29raWVfYWVuc2Nvb2tpZWlkIl0gPT0gbmlsKSB0aGVuXG4gICAgICBuZ3gudmFyW1wnYWV0cmlja2FuZXNjb29raWVpZFwnXSA9IFwnXCdcbiAgICBlbHNlXG4gICAgICBuZ3gudmFyW1wnYWV0cmlja2FuZXNjb29raWVpZFwnXSA9IFwnYWUtcGJrLWFlbnNjb29raWVpZD1cJyAuLiBuZ3gudmFyWyJjb29raWVfYWVuc2Nvb2tpZWlkIl0gLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vXCdcbiAgICBlbmRcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZUFmZmluaXR5Q29va2llVmFsdWU7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcmV0dXJuIDQwMDtcbiAgcHJveHlfcGFzcyBodHRwczovL2FlLXBiay1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9odHRwX3ZlcnNpb24gMS4xO1xuICBwcm94eV9zZXRfaGVhZGVyICAgIkNvbm5lY3Rpb24iICIiO1xuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZXRyaWNrY3NyZnRva2VuO1xuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZXRyaWNrYW5lc2Nvb2tpZWlkO1xufVxubG9jYXRpb24gL2FlLXBiay96ZW4tbG9nb3V0XG57XG4gIHNldCAkaHR0cF9hZWFmZmluaXR5dmFycyBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2libS1wcml2YXRlLWNsb3VkLXNlc3Npb24taWRcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICBpZiAoIHNlc3Npb25faWRfdmFsdWUgPT0gbmlsKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBhdXRoX2hlYWRlclxuICAgIGVsc2UgXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gICAgZW5kXG4gICAgbG9jYWwgYWVfY3NyZl90b2tlbl92YWx1ZSA9IG5neC52YXJbImNvb2tpZV9hZS1wYmstQ1NSRi1UT0tFTiJdXG4gICAgbG9jYWwgc2Vzc2lvbl90b2tlbl92YWx1ZSA9IG5neC52YXJbImNvb2tpZV9hZS1wYmstYWVuc2Nvb2tpZWlkIl1cbiAgICBpZiAoIGFlX2NzcmZfdG9rZW5fdmFsdWUgPT0gbmlsKSB0aGVuXG4gICAgZWxzZVxuICAgICAgbmd4LnJlcS5zZXRfaGVhZGVyKFwnWC1DU1JGLVRPS0VOXCcsIGFlX2NzcmZfdG9rZW5fdmFsdWUpXG4gICAgICBuZ3gucmVxLnNldF9oZWFkZXIoXCdDb29raWVcJywgXCdhZW5zY29va2llaWQ9XCcgLi4gc2Vzc2lvbl90b2tlbl92YWx1ZSAuLiBcJztcJyAuLiBcJ0NTUkYtVE9LRU49XCcgLi4gYWVfY3NyZl90b2tlbl92YWx1ZSlcbiAgICBlbmRcbiAgfVxuICBwcm94eV9tZXRob2QgR0VUO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYWUtcGJrLXNlcnZlci1ub2FmZi9hZS1wYmsvYXV0aC9sb2dvdXQ7XG59JywgJ3Vwc3RyZWFtLmNvbmYnOiAnbHVhX3NoYXJlZF9kaWN0IGFlX3Bia19uZ2lueF9jYWNoZSAxbTtcbnVwc3RyZWFtIGFlLXBiay1zZXJ2ZXIge1xuICBzZXJ2ZXIgMTI3LjAuMC4xOjQ0MztcbiAgYmFsYW5jZXJfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBiYWxhbmNlciA9IHJlcXVpcmUgIm5neC5iYWxhbmNlciJcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBpcCA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycylcbiAgICBsb2NhbCBvayAsIGVyciA9IGJhbGFuY2VyLnNldF9jdXJyZW50X3BlZXIoaXAsMzAwMSlcbiAgICBpZiBub3Qgb2sgdGhlblxuICAgICAgbmd4LmxvZyhuZ3guRVJSLCAiZmFpbGVkIHRvIHNldCB0aGUgY3VycmVudCBwZWVyOiAiLCBlcnIpXG4gICAgICByZXR1cm4gbmd4LmV4aXQoNTAwKVxuICAgIGVuZFxuICB9XG4gIGtlZXBhbGl2ZSA1MTI7XG4gIGtlZXBhbGl2ZV90aW1lb3V0IDMwcztcbiAga2VlcGFsaXZlX3JlcXVlc3RzIDUwMDtcbn1cbnVwc3RyZWFtIGFlLXBiay1zZXJ2ZXItbm9hZmYge1xuICBzZXJ2ZXIgaWNwNGFkZXBsb3ktcGJrLWFlLXNlcnZpY2UuY3A0YmEuc3ZjOjQ0MztcbiAga2VlcGFsaXZlIDUxMjtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xufVxuJ30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:18:41Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: etcd-zen-plugin
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: resource-registry
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      icpdata_addon: "true"
      icpdata_addon_version: 25.0.0
      release: 25.0.0
    name: icp4adeploy-rr-cp4ba-zen-ext
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4ACluster
      name: icp4adeploy
      uid: fd59d459-79de-48ea-83b1-ecac90d65c93
    resourceVersion: "41764826"
    uid: 398802b5-0539-4c39-a437-80ac7379dfd5
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-rr-cp4ba-zen-ext",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /resreg/
      {
        proxy_set_header Host $http_host;
        proxy_pass https://icp4adeploy-dba-rr-server/;
        proxy_http_version 1.1;
        proxy_set_header   "Connection" "";
        proxy_ssl_protocols TLSv1.3;
      }
    upstream.conf: |
      upstream icp4adeploy-dba-rr-server {
        server icp4adeploy-dba-rr-client.cp4ba.svc:2379;
        keepalive 32;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:40:35.777151+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:18:41Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:40:39Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T00:21:09Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktcnItY3A0YmEtemVuLWV4dCIsXG4gICAgICAiZGV0YWlscyI6IHtcbiAgICAgICAgInVwc3RyZWFtX2NvbmYiOiAidXBzdHJlYW0uY29uZiIsXG4gICAgICAgICJsb2NhdGlvbl9jb25mIjogIm5naW54LmNvbmYiXG4gICAgICB9XG4gIH1cbl1cbicsICduZ2lueC5jb25mJzogJ2xvY2F0aW9uIC9yZXNyZWcvXG57XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktZGJhLXJyLXNlcnZlci87XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG4gIHByb3h5X3NldF9oZWFkZXIgICAiQ29ubmVjdGlvbiIgIiI7XG4gIHByb3h5X3NzbF9wcm90b2NvbHMgVExTdjEuMztcbn0nLCAndXBzdHJlYW0uY29uZic6ICd1cHN0cmVhbSBpY3A0YWRlcGxveS1kYmEtcnItc2VydmVyIHtcbiAgc2VydmVyIGljcDRhZGVwbG95LWRiYS1yci1jbGllbnQuY3A0YmEuc3ZjOjIzNzk7XG4gIGtlZXBhbGl2ZSAzMjtcbiAga2VlcGFsaXZlX3RpbWVvdXQgMzBzO1xuICBrZWVwYWxpdmVfcmVxdWVzdHMgNTAwO1xufVxuJ30=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:18:41Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: content
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-tm-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41768359"
    uid: ec26e9fc-339e-4666-a8e4-ff34b9d6438d
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-tm-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /tm/
      {
        access_by_lua_file /nginx_data/checkjwt.lua;
        proxy_set_header Host $http_host;
        proxy_set_header X-ZEN-ROUTING '$host';
        proxy_pass https://icp4adeploy-tm-svc.cp4ba.svc:9443/taskManagerWeb/;
        proxy_buffer_size          256k;
        proxy_buffers              8 512k;
        proxy_busy_buffers_size    512k;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
        proxy_read_timeout 300;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:43:32.281268+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:18:41Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:43:36Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:22:09Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktdG0temVuLWV4dGVuc2lvbiIsXG4gICAgICAiZGV0YWlscyI6IHtcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAibG9jYXRpb24gL3RtL1xue1xuICBhY2Nlc3NfYnlfbHVhX2ZpbGUgL25naW54X2RhdGEvY2hlY2tqd3QubHVhO1xuICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiAgcHJveHlfc2V0X2hlYWRlciBYLVpFTi1ST1VUSU5HICckaG9zdCc7XG4gIHByb3h5X3Bhc3MgaHR0cHM6Ly9pY3A0YWRlcGxveS10bS1zdmMuY3A0YmEuc3ZjOjk0NDMvdGFza01hbmFnZXJXZWIvO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAzMDA7XG4gIHByb3h5X3JlYWRfdGltZW91dCAzMDA7XG59In0=
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T01:26:55Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: zen-extension
      app.kubernetes.io/instance: icp4adeploy
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: adp
      app.kubernetes.io/part-of: icp4adeploy
    name: icp4adeploy-viewone-zen-extension
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: Content
      name: icp4adeploy
      uid: 618032ff-711b-41ad-9dfa-6a9190a1117b
    resourceVersion: "41763242"
    uid: d239d197-c769-49e9-bcdc-b70f6ce329b9
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "icp4adeploy-viewone-zen-extension",
            "details": {
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: |-
      location /adp/viewer/v1files
      {
       access_by_lua_file /nginx_data/checkjwt.lua;
       proxy_set_header Host $http_host;
       proxy_set_header X-ZEN-ROUTING '$host';
       proxy_pass https://icp4adeploy-viewone-svc.cp4ba.svc:9443/v1files;
       proxy_buffer_size 256k;
       proxy_connect_timeout 300;
       proxy_read_timeout  300;
       proxy_send_timeout  300;
       proxy_buffers 8 512k;
       proxy_busy_buffers_size 512k;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:39:15.492024+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T01:26:55Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:39:19Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:30:24Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiaWNwNGFkZXBsb3ktdmlld29uZS16ZW4tZXh0ZW5zaW9uIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAibG9jYXRpb25fY29uZiI6ICJuZ2lueC5jb25mIlxuICAgICAgfVxuICB9XG5dXG4nLCAnbmdpbnguY29uZic6ICJsb2NhdGlvbiAvYWRwL3ZpZXdlci92MWZpbGVzXG57XG4gYWNjZXNzX2J5X2x1YV9maWxlIC9uZ2lueF9kYXRhL2NoZWNrand0Lmx1YTtcbiBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGh0dHBfaG9zdDtcbiBwcm94eV9zZXRfaGVhZGVyIFgtWkVOLVJPVVRJTkcgJyRob3N0JztcbiBwcm94eV9wYXNzIGh0dHBzOi8vaWNwNGFkZXBsb3ktdmlld29uZS1zdmMuY3A0YmEuc3ZjOjk0NDMvdjFmaWxlcztcbiBwcm94eV9idWZmZXJfc2l6ZSAyNTZrO1xuIHByb3h5X2Nvbm5lY3RfdGltZW91dCAzMDA7XG4gcHJveHlfcmVhZF90aW1lb3V0ICAzMDA7XG4gcHJveHlfc2VuZF90aW1lb3V0ICAzMDA7XG4gcHJveHlfYnVmZmVycyA4IDUxMms7XG4gcHJveHlfYnVzeV9idWZmZXJzX3NpemUgNTEyaztcbn0ifQ==
- apiVersion: zen.cpd.ibm.com/v1
  kind: ZenExtension
  metadata:
    creationTimestamp: "2025-12-07T00:54:27Z"
    finalizers:
    - zenextension.zen.cpd.ibm.com/finalizer
    generation: 1
    labels:
      app.kubernetes.io/component: ae-zen-config
      app.kubernetes.io/instance: icp4adeploy-workspace-aae
      app.kubernetes.io/managed-by: Operator
      app.kubernetes.io/name: app-engine
      app.kubernetes.io/part-of: icp4adeploy
      app.kubernetes.io/version: 25.0.0
      icpdata_addon: "true"
      icpdata_addon_version: 25.0.0-f8f4e
      release: 25.0.0
    name: icp4adeploy-workspace-aae-zen-ext
    namespace: cp4ba
    ownerReferences:
    - apiVersion: icp4a.ibm.com/v1
      kind: ICP4ACluster
      name: icp4adeploy
      uid: fd59d459-79de-48ea-83b1-ecac90d65c93
    resourceVersion: "41769228"
    uid: dca443e4-3655-46d4-b477-beea60685c14
  spec:
    extensions: |
      [
        {
            "extension_point_id": "zen_front_door",
            "extension_name": "cp4ba-icp4adeploy-ae-workspace",
            "details": {
              "upstream_conf": "upstream.conf",
              "location_conf": "nginx.conf"
            }
        }
      ]
    nginx.conf: "location ~ /ae-workspace/.*/suffix_/bpm/notification/cometd\n{\n
      \ set $http_aeaffinityvars '';\n  set $aeAffinityCookieValue '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local b64 =
      require(\"ngx.base64\")\n    local auth_header = ngx.var.http_Authorization\n
      \   if ( ngx.var.request_method == \"OPTIONS\") then\n      auth_header = \"options_should_be_white_list_without_auth\"\n
      \   elseif (auth_header == nil) then\n      jwtcheck.auth()\n    elseif (string.sub(auth_header,1,5)~=\"Basic\")
      then\n      jwtcheck.auth()\n    end\n    local cookie_session_id = 'ae-workspace-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_aeaffinityvars
      = ngx.var[cookie_session_id_var] \n    local aeNginxCache = ngx.shared.ae_workspace_nginx_cache\n
      \   local ips = aeNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-workspace-aae-ae-service-headless.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-workspace-aae-ae-service-headless.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      aeNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_aeaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_aeaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_aeaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_aeaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['aeAffinityCookieValue']
      = 'ae-workspace-affinity-cookie=' .. ngx.var.http_aeaffinityvars .. '; Secure;
      HttpOnly; SameSite=Strict; Path=/ae-workspace'\n  }\n  add_header 'Set-Cookie'
      $aeAffinityCookieValue;\n  proxy_set_header Host $http_host;\n  proxy_set_header
      Upgrade $http_upgrade;\n  proxy_set_header Connection $http_connection;\n  rewrite
      ^ $request_uri;\n  rewrite ^/(.*) $1 break;\n  proxy_pass https://ae-workspace-server/$uri;\n
      \ proxy_buffer_size          256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_http_version 1.1;\n}\nlocation /ae-workspace/public-app/\n{\n
      \ set $http_aeaffinityvars '';\n  set $aeAffinityCookieValue '';\n  access_by_lua_block
      {\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id = 'ae-workspace-affinity-cookie'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    ngx.var.http_aeaffinityvars
      = ngx.var[cookie_session_id_var] \n    local aeNginxCache = ngx.shared.ae_workspace_nginx_cache\n
      \   local ips = aeNginxCache:get(\"ips\")\n    if ips == nil then\n      local
      resolver = require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n
      \         nameservers = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout
      = 2000,\n          no_random = true,\n      }\n      ips = {}\n      local answers,
      err, tries = r:query(\"icp4adeploy-workspace-aae-ae-service-headless.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-workspace-aae-ae-service-headless.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      aeNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_aeaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_aeaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_aeaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_aeaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['aeAffinityCookieValue']
      = 'ae-workspace-affinity-cookie=' .. ngx.var.http_aeaffinityvars .. '; Secure;
      HttpOnly; SameSite=Strict; Path=/ae-workspace'\n  }\n  add_header 'Set-Cookie'
      $aeAffinityCookieValue;\n  proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n
      \ rewrite ^/(.*) $1 break;\n  return 400;\n  proxy_pass https://ae-workspace-server/$uri;\n
      \ proxy_buffer_size          256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n}\nlocation /ae-workspace/\n{\n  set $http_aeaffinityvars
      '';\n  set $aetrickcsrftoken '';\n  set $aetrickanescookieid '';\n  access_by_lua_block
      {\n    local jwtcheck = require(\"nginx_data.verify-jwt\")\n    local auth_header
      = ngx.var.http_Authorization\n    if (auth_header == nil) then\n      jwtcheck.auth()\n
      \   elseif (string.sub(auth_header,1,5)~=\"Basic\") then\n      jwtcheck.auth()\n
      \   end\n\n    local b64 = require(\"ngx.base64\")\n    local cookie_session_id
      = 'ae-workspace-affinity-cookie'\n    local cookie_session_id_var = \"cookie_\"
      .. cookie_session_id\n    ngx.var.http_aeaffinityvars = ngx.var[cookie_session_id_var]
      \n    local aeNginxCache = ngx.shared.ae_workspace_nginx_cache\n    local ips
      = aeNginxCache:get(\"ips\")\n    if ips == nil then\n      local resolver =
      require \"resty.dns.resolver\"\n      local r, err = resolver:new{\n          nameservers
      = { \"172.30.0.10\" },\n          retrans = 5,\n          timeout = 2000,\n
      \         no_random = true,\n      }\n      ips = {}\n      local answers, err,
      tries = r:query(\"icp4adeploy-workspace-aae-ae-service-headless.cp4ba.svc.cluster.local\",
      nil, {})\n      if table.getn(answers) == 0 then\n        answers, err, tries
      = r:query(\"icp4adeploy-workspace-aae-ae-service-headless.cp4ba.svc.cluster.local\",
      {\n          qtype = 28,\n          additional_section = true,\n        }, {})\n
      \       for i, ans in ipairs(answers) do\n          ips[i] = \"[\" .. ans.address
      .. \"]\"\n        end\n      else\n        for i, ans in ipairs(answers) do\n
      \         ips[i] = ans.address\n        end\n      end\n      aeNginxCache:set(\"ips\",
      ips, 2000)\n    end\n    local checked = false\n    if ngx.var.http_aeaffinityvars
      == nil then\n      checked = true\n      ngx.var.http_aeaffinityvars = b64.encode_base64url(ips[math.random(table.getn(ips))])\n
      \   else\n      local ipValue = b64.decode_base64url(ngx.var.http_aeaffinityvars)\n
      \     for i =1, table.getn(ips) do\n        if ips[i] == ipValue then\n          checked
      = true\n        end\n      end\n    end\n    if ( not checked ) then\n      ngx.var.http_aeaffinityvars
      = b64.encode_base64url(ips[math.random(table.getn(ips))])\n    end\n    ngx.var['aeAffinityCookieValue']
      = 'ae-workspace-affinity-cookie=' .. ngx.var.http_aeaffinityvars .. '; Secure;
      HttpOnly; SameSite=Strict; Path=/ae-workspace'\n\n    if ( ngx.var[\"cookie_CSRF-TOKEN\"]
      == nil) then\n      ngx.var['aetrickcsrftoken'] = ''\n    else\n      ngx.var['aetrickcsrftoken']
      = 'ae-workspace-CSRF-TOKEN=' .. ngx.var[\"cookie_CSRF-TOKEN\"] .. '; Secure;
      HttpOnly; SameSite=Strict; Path=/'\n    end\n    if ( ngx.var[\"cookie_aenscookieid\"]
      == nil) then\n      ngx.var['aetrickanescookieid'] = ''\n    else\n      ngx.var['aetrickanescookieid']
      = 'ae-workspace-aenscookieid=' .. ngx.var[\"cookie_aenscookieid\"] .. '; Secure;
      HttpOnly; SameSite=Strict; Path=/'\n    end\n  }\n  add_header 'Set-Cookie'
      $aeAffinityCookieValue;\n  proxy_set_header Host $http_host;\n  rewrite ^ $request_uri;\n
      \ rewrite ^/(.*) $1 break;\n  return 400;\n  proxy_pass https://ae-workspace-server/$uri;\n
      \ proxy_buffer_size          256k;\n  proxy_buffers              8 512k;\n  proxy_busy_buffers_size
      \   512k;\n  proxy_connect_timeout   300;\n  proxy_send_timeout      300;\n
      \ proxy_read_timeout      300;\n  proxy_http_version 1.1;\n  proxy_set_header
      \  \"Connection\" \"\";\n  add_header 'Set-Cookie' $aetrickcsrftoken;\n  add_header
      'Set-Cookie' $aetrickanescookieid;\n}\nlocation /ae-workspace/zen-logout\n{\n
      \ set $http_aeaffinityvars '';\n  access_by_lua_block {\n    local auth_header
      = ngx.var.http_Authorization\n    local cookie_session_id = 'ibm-private-cloud-session-id'\n
      \   local cookie_session_id_var = \"cookie_\" .. cookie_session_id\n    local
      session_id_value = ngx.var[cookie_session_id_var]\n    if ( session_id_value
      == nil) then\n      ngx.var.http_aeaffinityvars = auth_header\n    else \n      ngx.var.http_aeaffinityvars
      = session_id_value\n    end\n    local ae_csrf_token_value = ngx.var[\"cookie_ae-workspace-CSRF-TOKEN\"]\n
      \   local session_token_value = ngx.var[\"cookie_ae-workspace-aenscookieid\"]\n
      \   if ( ae_csrf_token_value == nil) then\n    else\n      ngx.req.set_header('X-CSRF-TOKEN',
      ae_csrf_token_value)\n      ngx.req.set_header('Cookie', 'aenscookieid=' ..
      session_token_value .. ';' .. 'CSRF-TOKEN=' .. ae_csrf_token_value)\n    end\n
      \ }\n  proxy_method GET;\n  proxy_pass https://ae-workspace-server-noaff/ae-workspace/auth/logout;\n}"
    upstream.conf: |
      lua_shared_dict ae_workspace_nginx_cache 1m;
      upstream ae-workspace-server {
        server 127.0.0.1:443;
        balancer_by_lua_block {
          local balancer = require "ngx.balancer"
          local b64 = require("ngx.base64")
          local ip = b64.decode_base64url(ngx.var.http_aeaffinityvars)
          local ok , err = balancer.set_current_peer(ip,3001)
          if not ok then
            ngx.log(ngx.ERR, "failed to set the current peer: ", err)
            return ngx.exit(500)
          end
        }
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
      upstream ae-workspace-server-noaff {
        server icp4adeploy-workspace-aae-ae-service.cp4ba.svc:443;
        keepalive 512;
        keepalive_timeout 30s;
        keepalive_requests 500;
      }
  status:
    conditions:
    - ansibleResult:
        changed: 0
        completion: "2025-12-15T17:44:19.802404+00:00"
        failures: 0
        ok: 10
        skipped: 1
      lastTransitionTime: "2025-12-07T00:56:50Z"
      message: Awaiting next reconciliation
      reason: Successful
      status: "True"
      type: Running
    - lastTransitionTime: "2025-12-15T17:44:21Z"
      message: Last reconciliation succeeded
      reason: Successful
      status: "True"
      type: Successful
    - lastTransitionTime: "2025-12-07T01:01:36Z"
      message: ""
      reason: ""
      status: "False"
      type: Failure
    message: All extensions have been successfully processed
    zenExtensionStatus: Completed
    zenLastSuccessfulSpec: eydleHRlbnNpb25zJzogJ1tcbiAge1xuICAgICAgImV4dGVuc2lvbl9wb2ludF9pZCI6ICJ6ZW5fZnJvbnRfZG9vciIsXG4gICAgICAiZXh0ZW5zaW9uX25hbWUiOiAiY3A0YmEtaWNwNGFkZXBsb3ktYWUtd29ya3NwYWNlIixcbiAgICAgICJkZXRhaWxzIjoge1xuICAgICAgICAidXBzdHJlYW1fY29uZiI6ICJ1cHN0cmVhbS5jb25mIixcbiAgICAgICAgImxvY2F0aW9uX2NvbmYiOiAibmdpbnguY29uZiJcbiAgICAgIH1cbiAgfVxuXVxuJywgJ25naW54LmNvbmYnOiAnbG9jYXRpb24gfiAvYWUtd29ya3NwYWNlLy4qL3N1ZmZpeF8vYnBtL25vdGlmaWNhdGlvbi9jb21ldGRcbntcbiAgc2V0ICRodHRwX2FlYWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYWVBZmZpbml0eUNvb2tpZVZhbHVlIFwnXCc7XG4gIGFjY2Vzc19ieV9sdWFfYmxvY2sge1xuICAgIGxvY2FsIGp3dGNoZWNrID0gcmVxdWlyZSgibmdpbnhfZGF0YS52ZXJpZnktand0IilcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgaWYgKCBuZ3gudmFyLnJlcXVlc3RfbWV0aG9kID09ICJPUFRJT05TIikgdGhlblxuICAgICAgYXV0aF9oZWFkZXIgPSAib3B0aW9uc19zaG91bGRfYmVfd2hpdGVfbGlzdF93aXRob3V0X2F1dGgiXG4gICAgZWxzZWlmIChhdXRoX2hlYWRlciA9PSBuaWwpIHRoZW5cbiAgICAgIGp3dGNoZWNrLmF1dGgoKVxuICAgIGVsc2VpZiAoc3RyaW5nLnN1YihhdXRoX2hlYWRlciwxLDUpfj0iQmFzaWMiKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbmRcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnYWUtd29ya3NwYWNlLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGFlTmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuYWVfd29ya3NwYWNlX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYWVOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGlwcyA9IHt9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktd29ya3NwYWNlLWFhZS1hZS1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwgbmlsLCB7fSlcbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS13b3Jrc3BhY2UtYWFlLWFlLXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBhZU5naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2FlQWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnYWUtd29ya3NwYWNlLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYWUtd29ya3NwYWNlXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZUFmZmluaXR5Q29va2llVmFsdWU7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTtcbiAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICRodHRwX2Nvbm5lY3Rpb247XG4gIHJld3JpdGUgXiAkcmVxdWVzdF91cmk7XG4gIHJld3JpdGUgXi8oLiopICQxIGJyZWFrO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYWUtd29ya3NwYWNlLXNlcnZlci8kdXJpO1xuICBwcm94eV9idWZmZXJfc2l6ZSAgICAgICAgICAyNTZrO1xuICBwcm94eV9idWZmZXJzICAgICAgICAgICAgICA4IDUxMms7XG4gIHByb3h5X2J1c3lfYnVmZmVyc19zaXplICAgIDUxMms7XG4gIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7XG59XG5sb2NhdGlvbiAvYWUtd29ya3NwYWNlL3B1YmxpYy1hcHAvXG57XG4gIHNldCAkaHR0cF9hZWFmZmluaXR5dmFycyBcJ1wnO1xuICBzZXQgJGFlQWZmaW5pdHlDb29raWVWYWx1ZSBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnYWUtd29ya3NwYWNlLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGFlTmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuYWVfd29ya3NwYWNlX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYWVOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGlwcyA9IHt9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktd29ya3NwYWNlLWFhZS1hZS1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwgbmlsLCB7fSlcbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS13b3Jrc3BhY2UtYWFlLWFlLXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBhZU5naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2FlQWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnYWUtd29ya3NwYWNlLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYWUtd29ya3NwYWNlXCdcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZUFmZmluaXR5Q29va2llVmFsdWU7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcmV0dXJuIDQwMDtcbiAgcHJveHlfcGFzcyBodHRwczovL2FlLXdvcmtzcGFjZS1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9odHRwX3ZlcnNpb24gMS4xO1xuICBwcm94eV9zZXRfaGVhZGVyICAgIkNvbm5lY3Rpb24iICIiO1xufVxubG9jYXRpb24gL2FlLXdvcmtzcGFjZS9cbntcbiAgc2V0ICRodHRwX2FlYWZmaW5pdHl2YXJzIFwnXCc7XG4gIHNldCAkYWV0cmlja2NzcmZ0b2tlbiBcJ1wnO1xuICBzZXQgJGFldHJpY2thbmVzY29va2llaWQgXCdcJztcbiAgYWNjZXNzX2J5X2x1YV9ibG9jayB7XG4gICAgbG9jYWwgand0Y2hlY2sgPSByZXF1aXJlKCJuZ2lueF9kYXRhLnZlcmlmeS1qd3QiKVxuICAgIGxvY2FsIGF1dGhfaGVhZGVyID0gbmd4LnZhci5odHRwX0F1dGhvcml6YXRpb25cbiAgICBpZiAoYXV0aF9oZWFkZXIgPT0gbmlsKSB0aGVuXG4gICAgICBqd3RjaGVjay5hdXRoKClcbiAgICBlbHNlaWYgKHN0cmluZy5zdWIoYXV0aF9oZWFkZXIsMSw1KX49IkJhc2ljIikgdGhlblxuICAgICAgand0Y2hlY2suYXV0aCgpXG4gICAgZW5kXG5cbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBjb29raWVfc2Vzc2lvbl9pZCA9IFwnYWUtd29ya3NwYWNlLWFmZmluaXR5LWNvb2tpZVwnXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWRfdmFyID0gImNvb2tpZV8iIC4uIGNvb2tpZV9zZXNzaW9uX2lkXG4gICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gbmd4LnZhcltjb29raWVfc2Vzc2lvbl9pZF92YXJdIFxuICAgIGxvY2FsIGFlTmdpbnhDYWNoZSA9IG5neC5zaGFyZWQuYWVfd29ya3NwYWNlX25naW54X2NhY2hlXG4gICAgbG9jYWwgaXBzID0gYWVOZ2lueENhY2hlOmdldCgiaXBzIilcbiAgICBpZiBpcHMgPT0gbmlsIHRoZW5cbiAgICAgIGxvY2FsIHJlc29sdmVyID0gcmVxdWlyZSAicmVzdHkuZG5zLnJlc29sdmVyIlxuICAgICAgbG9jYWwgciwgZXJyID0gcmVzb2x2ZXI6bmV3e1xuICAgICAgICAgIG5hbWVzZXJ2ZXJzID0geyAiMTcyLjMwLjAuMTAiIH0sXG4gICAgICAgICAgcmV0cmFucyA9IDUsXG4gICAgICAgICAgdGltZW91dCA9IDIwMDAsXG4gICAgICAgICAgbm9fcmFuZG9tID0gdHJ1ZSxcbiAgICAgIH1cbiAgICAgIGlwcyA9IHt9XG4gICAgICBsb2NhbCBhbnN3ZXJzLCBlcnIsIHRyaWVzID0gcjpxdWVyeSgiaWNwNGFkZXBsb3ktd29ya3NwYWNlLWFhZS1hZS1zZXJ2aWNlLWhlYWRsZXNzLmNwNGJhLnN2Yy5jbHVzdGVyLmxvY2FsIiwgbmlsLCB7fSlcbiAgICAgIGlmIHRhYmxlLmdldG4oYW5zd2VycykgPT0gMCB0aGVuXG4gICAgICAgIGFuc3dlcnMsIGVyciwgdHJpZXMgPSByOnF1ZXJ5KCJpY3A0YWRlcGxveS13b3Jrc3BhY2UtYWFlLWFlLXNlcnZpY2UtaGVhZGxlc3MuY3A0YmEuc3ZjLmNsdXN0ZXIubG9jYWwiLCB7XG4gICAgICAgICAgcXR5cGUgPSAyOCxcbiAgICAgICAgICBhZGRpdGlvbmFsX3NlY3Rpb24gPSB0cnVlLFxuICAgICAgICB9LCB7fSlcbiAgICAgICAgZm9yIGksIGFucyBpbiBpcGFpcnMoYW5zd2VycykgZG9cbiAgICAgICAgICBpcHNbaV0gPSAiWyIgLi4gYW5zLmFkZHJlc3MgLi4gIl0iXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBmb3IgaSwgYW5zIGluIGlwYWlycyhhbnN3ZXJzKSBkb1xuICAgICAgICAgIGlwc1tpXSA9IGFucy5hZGRyZXNzXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICBhZU5naW54Q2FjaGU6c2V0KCJpcHMiLCBpcHMsIDIwMDApXG4gICAgZW5kXG4gICAgbG9jYWwgY2hlY2tlZCA9IGZhbHNlXG4gICAgaWYgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID09IG5pbCB0aGVuXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgbmd4LnZhci5odHRwX2FlYWZmaW5pdHl2YXJzID0gYjY0LmVuY29kZV9iYXNlNjR1cmwoaXBzW21hdGgucmFuZG9tKHRhYmxlLmdldG4oaXBzKSldKVxuICAgIGVsc2VcbiAgICAgIGxvY2FsIGlwVmFsdWUgPSBiNjQuZGVjb2RlX2Jhc2U2NHVybChuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMpXG4gICAgICBmb3IgaSA9MSwgdGFibGUuZ2V0bihpcHMpIGRvXG4gICAgICAgIGlmIGlwc1tpXSA9PSBpcFZhbHVlIHRoZW5cbiAgICAgICAgICBjaGVja2VkID0gdHJ1ZVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmICggbm90IGNoZWNrZWQgKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBiNjQuZW5jb2RlX2Jhc2U2NHVybChpcHNbbWF0aC5yYW5kb20odGFibGUuZ2V0bihpcHMpKV0pXG4gICAgZW5kXG4gICAgbmd4LnZhcltcJ2FlQWZmaW5pdHlDb29raWVWYWx1ZVwnXSA9IFwnYWUtd29ya3NwYWNlLWFmZmluaXR5LWNvb2tpZT1cJyAuLiBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vYWUtd29ya3NwYWNlXCdcblxuICAgIGlmICggbmd4LnZhclsiY29va2llX0NTUkYtVE9LRU4iXSA9PSBuaWwpIHRoZW5cbiAgICAgIG5neC52YXJbXCdhZXRyaWNrY3NyZnRva2VuXCddID0gXCdcJ1xuICAgIGVsc2VcbiAgICAgIG5neC52YXJbXCdhZXRyaWNrY3NyZnRva2VuXCddID0gXCdhZS13b3Jrc3BhY2UtQ1NSRi1UT0tFTj1cJyAuLiBuZ3gudmFyWyJjb29raWVfQ1NSRi1UT0tFTiJdIC4uIFwnOyBTZWN1cmU7IEh0dHBPbmx5OyBTYW1lU2l0ZT1TdHJpY3Q7IFBhdGg9L1wnXG4gICAgZW5kXG4gICAgaWYgKCBuZ3gudmFyWyJjb29raWVfYWVuc2Nvb2tpZWlkIl0gPT0gbmlsKSB0aGVuXG4gICAgICBuZ3gudmFyW1wnYWV0cmlja2FuZXNjb29raWVpZFwnXSA9IFwnXCdcbiAgICBlbHNlXG4gICAgICBuZ3gudmFyW1wnYWV0cmlja2FuZXNjb29raWVpZFwnXSA9IFwnYWUtd29ya3NwYWNlLWFlbnNjb29raWVpZD1cJyAuLiBuZ3gudmFyWyJjb29raWVfYWVuc2Nvb2tpZWlkIl0gLi4gXCc7IFNlY3VyZTsgSHR0cE9ubHk7IFNhbWVTaXRlPVN0cmljdDsgUGF0aD0vXCdcbiAgICBlbmRcbiAgfVxuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZUFmZmluaXR5Q29va2llVmFsdWU7XG4gIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaHR0cF9ob3N0O1xuICByZXdyaXRlIF4gJHJlcXVlc3RfdXJpO1xuICByZXdyaXRlIF4vKC4qKSAkMSBicmVhaztcbiAgcmV0dXJuIDQwMDtcbiAgcHJveHlfcGFzcyBodHRwczovL2FlLXdvcmtzcGFjZS1zZXJ2ZXIvJHVyaTtcbiAgcHJveHlfYnVmZmVyX3NpemUgICAgICAgICAgMjU2aztcbiAgcHJveHlfYnVmZmVycyAgICAgICAgICAgICAgOCA1MTJrO1xuICBwcm94eV9idXN5X2J1ZmZlcnNfc2l6ZSAgICA1MTJrO1xuICBwcm94eV9jb25uZWN0X3RpbWVvdXQgICAzMDA7XG4gIHByb3h5X3NlbmRfdGltZW91dCAgICAgIDMwMDtcbiAgcHJveHlfcmVhZF90aW1lb3V0ICAgICAgMzAwO1xuICBwcm94eV9odHRwX3ZlcnNpb24gMS4xO1xuICBwcm94eV9zZXRfaGVhZGVyICAgIkNvbm5lY3Rpb24iICIiO1xuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZXRyaWNrY3NyZnRva2VuO1xuICBhZGRfaGVhZGVyIFwnU2V0LUNvb2tpZVwnICRhZXRyaWNrYW5lc2Nvb2tpZWlkO1xufVxubG9jYXRpb24gL2FlLXdvcmtzcGFjZS96ZW4tbG9nb3V0XG57XG4gIHNldCAkaHR0cF9hZWFmZmluaXR5dmFycyBcJ1wnO1xuICBhY2Nlc3NfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBhdXRoX2hlYWRlciA9IG5neC52YXIuaHR0cF9BdXRob3JpemF0aW9uXG4gICAgbG9jYWwgY29va2llX3Nlc3Npb25faWQgPSBcJ2libS1wcml2YXRlLWNsb3VkLXNlc3Npb24taWRcJ1xuICAgIGxvY2FsIGNvb2tpZV9zZXNzaW9uX2lkX3ZhciA9ICJjb29raWVfIiAuLiBjb29raWVfc2Vzc2lvbl9pZFxuICAgIGxvY2FsIHNlc3Npb25faWRfdmFsdWUgPSBuZ3gudmFyW2Nvb2tpZV9zZXNzaW9uX2lkX3Zhcl1cbiAgICBpZiAoIHNlc3Npb25faWRfdmFsdWUgPT0gbmlsKSB0aGVuXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBhdXRoX2hlYWRlclxuICAgIGVsc2UgXG4gICAgICBuZ3gudmFyLmh0dHBfYWVhZmZpbml0eXZhcnMgPSBzZXNzaW9uX2lkX3ZhbHVlXG4gICAgZW5kXG4gICAgbG9jYWwgYWVfY3NyZl90b2tlbl92YWx1ZSA9IG5neC52YXJbImNvb2tpZV9hZS13b3Jrc3BhY2UtQ1NSRi1UT0tFTiJdXG4gICAgbG9jYWwgc2Vzc2lvbl90b2tlbl92YWx1ZSA9IG5neC52YXJbImNvb2tpZV9hZS13b3Jrc3BhY2UtYWVuc2Nvb2tpZWlkIl1cbiAgICBpZiAoIGFlX2NzcmZfdG9rZW5fdmFsdWUgPT0gbmlsKSB0aGVuXG4gICAgZWxzZVxuICAgICAgbmd4LnJlcS5zZXRfaGVhZGVyKFwnWC1DU1JGLVRPS0VOXCcsIGFlX2NzcmZfdG9rZW5fdmFsdWUpXG4gICAgICBuZ3gucmVxLnNldF9oZWFkZXIoXCdDb29raWVcJywgXCdhZW5zY29va2llaWQ9XCcgLi4gc2Vzc2lvbl90b2tlbl92YWx1ZSAuLiBcJztcJyAuLiBcJ0NTUkYtVE9LRU49XCcgLi4gYWVfY3NyZl90b2tlbl92YWx1ZSlcbiAgICBlbmRcbiAgfVxuICBwcm94eV9tZXRob2QgR0VUO1xuICBwcm94eV9wYXNzIGh0dHBzOi8vYWUtd29ya3NwYWNlLXNlcnZlci1ub2FmZi9hZS13b3Jrc3BhY2UvYXV0aC9sb2dvdXQ7XG59JywgJ3Vwc3RyZWFtLmNvbmYnOiAnbHVhX3NoYXJlZF9kaWN0IGFlX3dvcmtzcGFjZV9uZ2lueF9jYWNoZSAxbTtcbnVwc3RyZWFtIGFlLXdvcmtzcGFjZS1zZXJ2ZXIge1xuICBzZXJ2ZXIgMTI3LjAuMC4xOjQ0MztcbiAgYmFsYW5jZXJfYnlfbHVhX2Jsb2NrIHtcbiAgICBsb2NhbCBiYWxhbmNlciA9IHJlcXVpcmUgIm5neC5iYWxhbmNlciJcbiAgICBsb2NhbCBiNjQgPSByZXF1aXJlKCJuZ3guYmFzZTY0IilcbiAgICBsb2NhbCBpcCA9IGI2NC5kZWNvZGVfYmFzZTY0dXJsKG5neC52YXIuaHR0cF9hZWFmZmluaXR5dmFycylcbiAgICBsb2NhbCBvayAsIGVyciA9IGJhbGFuY2VyLnNldF9jdXJyZW50X3BlZXIoaXAsMzAwMSlcbiAgICBpZiBub3Qgb2sgdGhlblxuICAgICAgbmd4LmxvZyhuZ3guRVJSLCAiZmFpbGVkIHRvIHNldCB0aGUgY3VycmVudCBwZWVyOiAiLCBlcnIpXG4gICAgICByZXR1cm4gbmd4LmV4aXQoNTAwKVxuICAgIGVuZFxuICB9XG4gIGtlZXBhbGl2ZSA1MTI7XG4gIGtlZXBhbGl2ZV90aW1lb3V0IDMwcztcbiAga2VlcGFsaXZlX3JlcXVlc3RzIDUwMDtcbn1cbnVwc3RyZWFtIGFlLXdvcmtzcGFjZS1zZXJ2ZXItbm9hZmYge1xuICBzZXJ2ZXIgaWNwNGFkZXBsb3ktd29ya3NwYWNlLWFhZS1hZS1zZXJ2aWNlLmNwNGJhLnN2Yzo0NDM7XG4gIGtlZXBhbGl2ZSA1MTI7XG4gIGtlZXBhbGl2ZV90aW1lb3V0IDMwcztcbiAga2VlcGFsaXZlX3JlcXVlc3RzIDUwMDtcbn1cbid9
kind: List
metadata:
  resourceVersion: ""
